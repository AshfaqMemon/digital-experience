<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xmlns:whc="http://www.oxygenxml.com/webhelp/components" xml:lang="en-us" lang="en-us" whc:version="22.0">
    <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta charset="UTF-8"/><meta name="DC.rights.owner" content="(C) Copyright 2022"/><meta name="copyright" content="(C) Copyright 2022"/><meta name="generator" content="DITA-OT"/><meta name="DC.type" content="concept"/><meta name="description" content="Read the installation instructions to learn how to apply a cumulative fix to a clustered portal installation or to roll back the cumulative fix."/><meta name="DC.relation" scheme="URI" content="../overview/ccf_strategy95.html"/><meta name="DC.format" content="HTML5"/><meta name="DC.identifier" content="new_cf"/><meta name="DC.language" content="en-us"/>        
      <title>Cumulative fix instructions: Cluster | HCL Digital Experience 9.5</title><!--  Generated with Oxygen version 23.1, build number 2021040717.  --><meta name="wh-path2root" content="../"/><meta name="wh-toc-id" content="new_cf-d10859e1181"/><meta name="wh-source-relpath" content="overview/ccf_95_cluster.dita"/><meta name="wh-out-relpath" content="overview/ccf_95_cluster.html"/>
    <!-- Latest compiled and minified Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/lib/bootstrap/css/bootstrap.min.css"/>
    
    <link rel="stylesheet" href="../oxygen-webhelp/lib/jquery-ui/jquery-ui.min.css"/>
    
    <!-- Template default styles  -->
    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic-page.css?buildId=2021040717"/>
    
    
    <script type="text/javascript" src="../oxygen-webhelp/lib/jquery/jquery-3.5.1.min.js"><!----></script>
    
    <script data-main="../oxygen-webhelp/app/topic-page.js" src="../oxygen-webhelp/lib/requirejs/require.js"></script>
<link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/cobalt.css?buildId=2021040717"/></head>

    <body id="new_cf" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            Jump to main content
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header" whc:version="23.1">
    <div class="container-fluid">
        <div class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <!--
                            This component will be generated when the next parameters are specified in the transformation scenario:
                            'webhelp.logo.image' and 'webhelp.logo.image.target.url'.
                            See: http://oxygenxml.com/doc/versions/17.1/ug-editor/#topics/dita_webhelp_output.html.
                    -->
                    
                    <div class=" wh_publication_title "><a href="../index.html"><span class="title"><span class="ph">HCL Digital Experience 9.5</span></span></a></div>
                    
                </div>
                
                <!-- The menu button for mobile devices is copied in the output only when the 'webhelp.show.top.menu' parameter is set to 'yes' -->
                <button type="button" data-target="#wh_top_menu_and_indexterms_link" id="wh_menu_mobile_button" data-toggle="collapse" class="navbar-toggler collapsed wh_toggle_button" aria-expanded="false" aria-label="Toggle menu" aria-controls="wh_top_menu_and_indexterms_link">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                <nav class=" wh_top_menu " aria-label="Menu Container"><ul role="menubar" aria-label="Menu"><li role="menuitem" aria-haspopup="true" aria-expanded="false" class="has-children"><span id="kc_welcome-d10859e12-mi" data-tocid="kc_welcome-d10859e12" data-state="not-ready" class=" topicref " data-id="kc_welcome"><span class="title"><a href="../welcome/wp95_welcome.html">HCL Digital Experience 9.5</a></span></span></li></ul></nav>
                <div class=" wh_indexterms_link "><a href="../indexTerms.html" title="Index" aria-label="Go to index terms page"><span>Index</span></a></div>
                
            </div>
        </div>
    </div>
</header>
        
        
         
        
        <!-- Search form -->
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="Search " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="Search query" required="required"/><button type="submit" class="wh_search_button" aria-label="Search"><span class="search_input_text">Search</span></button></div></form>
            
            
            
        </div>
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="../index.html"><span>Home</span></a></span></li><li><span class="topicref" data-id="kc_welcome"><span class="title"><a href="../welcome/wp95_welcome.html">HCL Digital Experience 9.5</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" class="shortdesc">Welcome to the documentation for HCL Digital Experience                 9.5. Learn how to install, configure, troubleshoot, maintain and use Version 9.5 of                 HCL Digital Experience.</p></span></span></span></li><li><span class="topicref" data-id="concept_xkw_flt_1qb"><span class="title"><a href="../containerization/dx_non_container.html">Digital Experience on non-containerized platforms</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" class="shortdesc">Learn how to deploy HCL Digital Experience as a non-containerized application and         optimize web content and applications to deliver differentiated, personalized experiences         for your customers.</p></span></span></span></li><li><span class="topicref" data-id="new_cf"><span class="title"><a href="../overview/ccf_strategy95.html">Combined Cumulative Fix (CF) installation</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" class="shortdesc">The Combined Cumulative Fix is a package of HCL Digital Experience fixes. Read the     instructions to learn how to apply or roll back a combined cumulative fix. </p></span></span></span></li><li class="active"><span class="topicref" data-id="new_cf"><span class="title"><a href="../overview/ccf_95_cluster.html">Cumulative fix instructions: Cluster</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" class="shortdesc">Read the installation instructions to learn how to apply a cumulative fix to a clustered portal installation or to roll back the cumulative fix. </p></span></span></span></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="Toggle search highlights" title="Toggle search highlights"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="Collapse sections" title="Collapse sections"></button>
                        <div class=" wh_navigation_links "><span id="topic_navigation_links" class="navheader">
  </span></div>
                        
                        <!-- External resource link -->
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div>
                        
                        <!-- Expand/Collapse publishing TOC 
                             The menu button for mobile devices is copied in the output only when the publication TOC is available
                        -->
                        <button type="button" data-target="#wh_publication_toc" id="wh_toc_button" data-toggle="collapse" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        
                        <nav id="wh_publication_toc" class="collapse col-lg-3 col-md-3 col-sm-12 d-md-block d-print-none" aria-label="Table of Contents Container">
                            <div class=" wh_publication_toc " data-tooltip-position="right"><ul role="tree" aria-label="Table of Contents"><span class="expand-button-action-labels"><span id="button-expand-action" aria-label="Expand"></span><span id="button-collapse-action" aria-label="Collapse"></span><span id="button-pending-action" aria-label="Pending"></span></span><li role="treeitem" aria-expanded="true"><span data-tocid="kc_welcome-d10859e12" class="topicref" data-id="kc_welcome" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action kc_welcome-d10859e12-link" class="wh-expand-btn"></span><span class="title"><a href="../welcome/wp95_welcome.html" id="kc_welcome-d10859e12-link">HCL Digital Experience 9.5</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" class="shortdesc">Welcome to the documentation for HCL Digital Experience                 9.5. Learn how to install, configure, troubleshoot, maintain and use Version 9.5 of                 HCL Digital Experience.</p></span></span></span><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="true"><span data-tocid="concept_xkw_flt_1qb-d10859e23" class="topicref" data-id="concept_xkw_flt_1qb" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action concept_xkw_flt_1qb-d10859e23-link" class="wh-expand-btn"></span><span class="title"><a href="../containerization/dx_non_container.html" id="concept_xkw_flt_1qb-d10859e23-link">Digital Experience on non-containerized platforms</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" class="shortdesc">Learn how to deploy HCL Digital Experience as a non-containerized application and         optimize web content and applications to deliver differentiated, personalized experiences         for your customers.</p></span></span></span><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><span data-tocid="installing_parent2-d10859e34" class="topicref" data-id="installing_parent2" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action installing_parent2-d10859e34-link" class="wh-expand-btn"></span><span class="title"><a href="../install/installing_parent2.html" id="installing_parent2-d10859e34-link">Installing HCL Digital Experience</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" class="shortdesc">Review the planning information on HCL Digital Experience, then select your operating     system and installation pattern that most reflects your business needs.</p></span></span></span></li><li role="treeitem" aria-expanded="true"><span data-tocid="new_cf-d10859e1159" class="topicref" data-id="new_cf" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action new_cf-d10859e1159-link" class="wh-expand-btn"></span><span class="title"><a href="../overview/ccf_strategy95.html" id="new_cf-d10859e1159-link">Combined Cumulative Fix (CF) installation</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" class="shortdesc">The Combined Cumulative Fix is a package of HCL Digital Experience fixes. Read the     instructions to learn how to apply or roll back a combined cumulative fix. </p></span></span></span><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><span data-tocid="new_cf-d10859e1170" class="topicref" data-id="new_cf" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../overview/ccf_95_standalone.html" id="new_cf-d10859e1170-link">Cumulative fix instructions: Stand-alone</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" class="shortdesc">Read the installation instructions to learn how to apply a cumulative fix to a stand-alone portal  installation or to roll back the cumulative fix.</p></span></span></span></li><li role="treeitem" class="active"><span data-tocid="new_cf-d10859e1181" class="topicref" data-id="new_cf" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../overview/ccf_95_cluster.html" id="new_cf-d10859e1181-link">Cumulative fix instructions: Cluster</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" class="shortdesc">Read the installation instructions to learn how to apply a cumulative fix to a clustered portal installation or to roll back the cumulative fix. </p></span></span></span></li><li role="treeitem"><span data-tocid="new_cf-d10859e1192" class="topicref" data-id="new_cf" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../overview/ccf_95_farm.html" id="new_cf-d10859e1192-link">Cumulative fix instructions: Farm</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" class="shortdesc">Read the installation instructions to learn how to apply a cumulative fix to a portal farm installation or to roll back the cumulative fix.</p></span></span></span></li><li role="treeitem"><span data-tocid="new_cf-d10859e1203" class="topicref" data-id="new_cf" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../overview/ccf_95_remote_search.html" id="new_cf-d10859e1203-link">Cumulative fix instructions: Remote search</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" class="shortdesc">Read the installation instructions to learn how to apply a cumulative fix to a portal remote search installation or to roll back the cumulative fix.</p></span></span></span></li><li role="treeitem"><span data-tocid="new_cf-d10859e1214" class="topicref" data-id="new_cf" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../overview/ccf_95_health_checker.html" id="new_cf-d10859e1214-link">Cumulative Fix Health Checker</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" class="shortdesc">These instructions are for the HCL Digital Experience Combined Cumulative Fix Health Checker.</p></span></span></span></li><li role="treeitem"><span data-tocid="new_cf-d10859e1225" class="topicref" data-id="new_cf" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../overview/ccf_95_known_issues.html" id="new_cf-d10859e1225-link">Known Issues for the Combined Cumulative Fix</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" class="shortdesc">Learn what are the known issues in the HCL Digital Experience           Combined Cumulative Fixes.</p></span></span></span></li></ul></li><li role="treeitem" aria-expanded="false"><span data-tocid="i_wadm_c_bkup_restr_winlinux-d10859e1236" class="topicref" data-id="i_wadm_c_bkup_restr_winlinux" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action i_wadm_c_bkup_restr_winlinux-d10859e1236-link" class="wh-expand-btn"></span><span class="title"><a href="../admin-system/i_wadm_c_bkup_restr_winlinux.html" id="i_wadm_c_bkup_restr_winlinux-d10859e1236-link">Backup and restore</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" class="shortdesc">Backup and recovery of data files and databases is an essential operation for     any business system, particularly for data and applications that run in production environments.     Create and follow a plan for backing up and recovering data on all tiers of your HCL Digital     Experience deployment. IBM Installation Manager must also be included in backup and recovery     planning. If you back up the HCL Portal file structure and then install a fix pack, your HCL Digital     Experience and IBM Installation Manager become out of sync after you restore the HCL Portal file     system. This condition is not recoverable.</p></span></span></span></li><li role="treeitem" aria-expanded="false"><span data-tocid="migrating_parent-d10859e1418" class="topicref" data-id="migrating_parent" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action migrating_parent-d10859e1418-link" class="wh-expand-btn"></span><span class="title"><a href="../migrate/migration.html" id="migrating_parent-d10859e1418-link">Migrating</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" class="shortdesc">Successful migration requires significant planning and preparation, understanding the     tools that are involved, and careful execution of the appropriate steps in the order     provided.</p></span></span></span></li><li role="treeitem" aria-expanded="false"><span data-tocid="site_setup-d10859e3484" class="topicref" data-id="site_setup" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action site_setup-d10859e3484-link" class="wh-expand-btn"></span><span class="title"><a href="../site/site_setup.html" id="site_setup-d10859e3484-link">Setting up a website</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" class="shortdesc">Setting up a website includes, creating pages, adding navigation, setting up search, and adding content to the site. Themes are used to customize the portal's look-and-feel. Out-of-the-box templates and the site wizard can help you set up your portal site faster. You can add wikis and blogs to your site and let users tag and rate content on your site.</p></span></span></span></li><li role="treeitem" aria-expanded="false"><span data-tocid="dep_intr-d10859e10947" class="topicref" data-id="dep_intr" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action dep_intr-d10859e10947-link" class="wh-expand-btn"></span><span class="title"><a href="../deploy/dep_intr.html" id="dep_intr-d10859e10947-link">Staging to production</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" class="shortdesc"> During portal solution development, the solution is initially developed, tested, and refined on one server or a limited number of servers. The solution is deployed later on live systems, referred to as the production environment. The process of moving the solution from the development environment to the production environment is called staging. </p></span></span></span></li><li role="treeitem" aria-expanded="false"><span data-tocid="ctc_intro-d10859e11243" class="topicref" data-id="ctc_intro" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action ctc_intro-d10859e11243-link" class="wh-expand-btn"></span><span class="title"><a href="../ctc/ctc_intro.html" id="ctc_intro-d10859e11243-link">Content Template Catalog 4.4</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" class="shortdesc">The Content Template (CTC) is a set of templates that accelerate the process of building     a website.</p></span></span></span></li></ul></li></ul></li></ul></div>
                        </nav>
                        
                    
                    
                    <div class="col-lg-7 col-md-9 col-sm-12" id="wh_topic_body">
                        
                        <div class=" wh_topic_content body "><main role="main"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="- topic/title title topictitle1" id="ariaid-title1">Cumulative fix instructions: Cluster | HCL Digital Experience 9.5</h1>

	
<div class="- topic/body concept/conbody body conbody"><p class="- topic/shortdesc shortdesc">Read the installation instructions to learn how to apply a cumulative fix to a clustered
portal installation or to roll back the cumulative fix. </p>
<section class="- topic/section section" id="new_cf__cluster_upgrade_planning" data-ofbid="new_cf__cluster_upgrade_planning"><h2 class="- topic/title title sectiontitle">Cluster upgrade planning</h2>

<p class="- topic/p p">There are two options for performing upgrade in a clustered environment. One option is to upgrade
the cluster while the entire cluster has been taken offline from receiving user traffic. The upgrade
is performed on every node in the cluster using the single-cluster procedure documented below before
the cluster is brought back online to receive user traffic. This is the recommended approach for an
environment with multiple Portal clusters since 24x7 availability can be maintained. It is also the
simplest approach to use in a single cluster environment if maintenance windows allow for the Portal
cluster to be taken offline. </p>
<div class="- topic/p p">For single cluster environments, which cannot tolerate the outage required to take a cluster
				offline and perform the upgrade, you can utilize the single-cluster 24x7
				availability process. Review the following requirements and limitations for
				performing product upgrades while maintaining 24x7 availability in a single
					cluster.<div class="- topic/note note note note_note"><span class="note__title">Note:</span> Ensure that you understand this information before upgrading your
					cluster.</div></div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Assumptions for maintaining 24x7 operation during the upgrade process</span>
<ul class="- topic/ul ul">
<li class="- topic/li li">If you want to preserve current user sessions during the upgrade process, make sure that
WebSphere Application Server distributed session support is enabled to recover user session
information when a cluster node is stopped for maintenance. Alternatively, use monitoring to
determine when all (or most) user sessions on a cluster node have completed before stopping the
cluster node for upgrade to minimize the disruption to existing user sessions.</li>
<li class="- topic/li li">Load balancing must be enabled in the clustered environment.</li>
<li class="- topic/li li">The cluster has at least two horizontal cluster members.</li>
</ul></div>
<p class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Limitations on 24x7 maintenance</span></p>
<div class="- topic/p p">1. The 24x7 Single cluster upgrade is only supported on a Rendering environment, with no
deployments or authoring being performed during the upgrade process. Typical authoring or deployment
tasks that must NOT be performed during the upgrade window (meaning until the whole cluster is
upgraded): <ul class="- topic/ul ul">
<li class="- topic/li li">Deploy portlets</li>
<li class="- topic/li li">Execute <span class="+ topic/ph sw-d/filepath ph filepath">XMLAccess</span></li>
<li class="- topic/li li">Author, modify, delete content</li>
<li class="- topic/li li">Run <code class="+ topic/ph pr-d/codeph ph codeph">ConfigEngine</code></li>
<li class="- topic/li li">Deploy PAAs</li>
<li class="- topic/li li">Import or Export libraries</li>
<li class="- topic/li li">Use the WAS AdminConsole or wsadmin tooling to deploy or modify configuration or code</li>
<li class="- topic/li li">Use the Portal Admin portlets to make changes like delete a page</li>
<li class="- topic/li li">Use any WCM system task like the <code class="+ topic/ph pr-d/codeph ph codeph">workflowchecker</code> or member fixer</li>
<li class="- topic/li li">Change WebDAV resources like the theme</li>
<li class="- topic/li li">Modify personalization rules</li>
<li class="- topic/li li">Create or Delete Virtual Portals</li>
<li class="- topic/li li">Perform JCR Search crawling with the Portal JCR search crawler (typically we recommend to
disable textsearch for JCR for rendering systems)</li>
<li class="- topic/li li">New features introduced with the Cumulative fix should not be enabled or leveraged until all
cluster members have been upgraded to the CF</li>
</ul></div>
<p class="- topic/p p">2. If you have not implemented horizontal scaling and have implemented only vertical scaling in
your environment such that all cluster members reside on the same node, the cumulative fix
installation process will result in a temporary outage for your end users due to a required restart.
In this case, you will be unable to upgrade while maintaining 24x7 availability.</p>
<p class="- topic/p p">3. If you have a single local Web server in your environment, maintaining 24x7 availability
during the cluster upgrade may not be possible since you might be required to stop the Web server
while applying corrective service to the local WebSphere Application Server installation.</p>
<p class="- topic/p p">4. When installing the cumulative fix in a clustered environment, the portlets are only deployed
when installing the cumulative fix on the primary node. The cumulative fix installation on
additional (also known as secondary) nodes simply synchronizes the node with the deployment manager
to receive updated portlets. During the portlet deployment on the primary node, the database will be
updated with the portlet configuration. This updated database, which is shared between all nodes,
would be available to additional nodes before the additional nodes receive the updated portlet
binary files. It is possible that the new portlet configuration will not be compatible with the
previous portlet binary files, and in a 24x7 production environment problems may arise with anyone
attempting to use a portlet that is not compatible with the new portlet configuration. Therefore it
is recommended that you test your portlets before upgrading the production system in a 24x7
environment to determine if any portlets will become temporarily unavailable on additional nodes
during the time between the completion of the cumulative fix installation on the primary node and
the installation of the cumulative fix on the additional node.</p>
<p class="- topic/p p">5. In order to maintain 24x7 operations in a clustered environment, it is required that you stop
HCL Portal on one node at a time and upgrade it. It is also required that during the upgrade
of the primary node, you manually stop node agents on all other cluster nodes that continue to
service user requests. Failure to do so may result in portlets being shown as unavailable on nodes
having the node agent running.</p>
<p class="- topic/p p">When rolling back of the cumulative fix in a clustered environment, the portlets are only
redeployed when roll back of the cumulative fix is on the primary node. The cumulative fix roll back
on additional nodes simply synchronizes the node with the deployment manager to receive updated
portlets. During the portlet redeployment on the primary node, the database will be updated with the
portlet configuration, which would be available to additional nodes before the additional nodes
receive the updated binary files, since all nodes share the same database. It is recommended that
you test your portlets before rolling back on the production system in a 24x7 environment because
the possibility of such incompatibility might arise if the previous portlet configuration is not
compatible with the new portlet binary files.</p>
</section>
<section class="- topic/section section" id="new_cf__before_you_begin_cluster_cf_fix" data-ofbid="new_cf__before_you_begin_cluster_cf_fix"><h2 class="- topic/title title sectiontitle">Before you begin</h2>

<div class="- topic/p p">
				<div class="- topic/note note note note_note"><span class="note__title">Note:</span> Unless you are migrating from a previous release or plan to add this node to
					an existing cluster, you must create your Portal profile before applying the
					cumulative fix. If you did not do this during the initial installation, you can
					use the Configuration Wizard to do so now. Portal Version 8.5 CF12 or later
					introduces support for JDK8. However, if you plan to use JDK 8 with your
					profile, you must first create the profile using JDK 7 and then upgrade to JDK 8
					after applying the cumulative fix.</div>
				<div class="- topic/note note note note_note"><span class="note__title">Note:</span> In Portal Version 8.5 CF12 or later, the blacklist settings have become more
					restrictive. For inquiries, go to <a class="- topic/xref xref" href="https://support.hcltechsw.com/csm" target="_blank" rel="external noopener">HCL Software Support</a> page.</div>
			</div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Space Requirements</span>Ensure that enough disk space is available in the
following directories: <ul class="- topic/ul ul">
<li class="- topic/li li">For all platforms: 2.0 GB in the download directory to download the cumulative fix, 1.5 GB in
<code class="+ topic/ph pr-d/codeph ph codeph">Portal_Install_Root</code>, 1 GB temporary disk space in
<code class="+ topic/ph pr-d/codeph ph codeph">(wp_profile_root)</code>, and 1.66 GB in the shared data space, which is the directory
where Installation Manager temporarily stores downloaded files for use during the update.</li>
<li class="- topic/li li">For Solaris: It is recommended that you allocate swap space equal to at least twice your
physical RAM to avoid memory errors during the configuration of this cumulative fix.</li>
</ul></div>
</section>
<section class="- topic/section section" id="new_cf__best_practices_cf_cluster_fix" data-ofbid="new_cf__best_practices_cf_cluster_fix"><h2 class="- topic/title title sectiontitle">Best Practices</h2>

<p class="- topic/p p">Go to the <a class="- topic/xref xref" href="https://support.hcltechsw.com/csm" target="_blank" rel="external noopener">HCL Software Support</a> page for <cite class="- topic/cite cite">Portal
					Upgrade Best Practices</cite>.</p>
</section>
<section class="- topic/section section" id="new_cf__syndicator_subscriber_information" data-ofbid="new_cf__syndicator_subscriber_information"><h2 class="- topic/title title sectiontitle">Syndicator/Subscriber Information</h2>

<p class="- topic/p p">It is recommended that servers utilizing syndication have associated syndicators and subscribers disabled prior to installing the cumulative fixpack.</p>
<p class="- topic/p p">Otherwise syndication updates that run during install may clash with install modifications and can cause the CF update to fail.</p>
<p class="- topic/p p">Syndicators and subscribers can be disabled by editing them in the syndication administration portlet. Go to the <a class="- topic/xref xref" href="../panel_help/wcm_reference_syndicatorfields.html">Syndicators</a> 
and <a class="- topic/xref xref" href="../panel_help/wcm_reference_subscriberfields.html">Subscribers</a>
topic pages in the HCL Digital Experience Version 8.5 product documentation for more information. Syndication should then be re-enabled after the update is complete.</p>
<div class="- topic/p p">Alternatively, the following ConfigEngine tasks have also been integrated into CF09 or later to
				globally disable and enable syndication (These tasks can be used in place of the
				manual updates linked above:
				<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>&lt;wp_profile root&gt;/ConfigEngine/ConfigEngine.sh|.bat disable-syndication-auto-scheduler</code></pre><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>&lt;wp_profile root&gt;/ConfigEngine/ConfigEngine.sh|.bat enable-syndication-auto-scheduler </code></pre></div>
</section>
<section class="- topic/section section" id="new_cf__search_crawler_info" data-ofbid="new_cf__search_crawler_info"><h2 class="- topic/title title sectiontitle">Search Crawler Information</h2>

<p class="- topic/p p">It is recommended that any search crawlers are disabled before applying the CF. If a CF is
applied at the same time the crawler is running, this may corrupt the search collection. The search
crawler should be restarted after the CF update is complete.</p>
</section>
<section class="- topic/section section" id="new_cf__backing_up_installation_manager_data" data-ofbid="new_cf__backing_up_installation_manager_data"><h2 class="- topic/title title sectiontitle">Backing up the Installation Manager data</h2>

<p class="- topic/p p">Backup the contents of the IBM Installation Manager data directory on the server you are
upgrading in the event you lose connection during the upgrade, as this could corrupt the data
directory.</p>
<div class="- topic/p p">The default locations of these directories are: <ul class="- topic/ul ul">
<li class="- topic/li li">Windows: <span class="+ topic/ph sw-d/filepath ph filepath">C:\ProgramData\IBM\InstallationManager</span></li>
<li class="- topic/li li">Linux/UNIX root users: <span class="+ topic/ph sw-d/filepath ph filepath">/var/ibm/InstallationManager</span></li>
<li class="- topic/li li">Linux/UNIX non-root users: <span class="+ topic/ph sw-d/filepath ph filepath">/home/(user id)/var/ibm/InstallationManager</span></li>
<li class="- topic/li li">IBM i: Installation location: <span class="+ topic/ph sw-d/filepath ph filepath">/QIBM/ProdData/InstallationManager</span></li>
<li class="- topic/li li">IBM i: Agent data location: <span class="+ topic/ph sw-d/filepath ph filepath">/QIBM/UserData/InstallationManager</span></li>
</ul></div>
</section>
<section class="- topic/section section" id="new_cf__known_issues_cluster_cf" data-ofbid="new_cf__known_issues_cluster_cf"><h2 class="- topic/title title sectiontitle">Known Issues</h2>

<p class="- topic/p p">Review the <a class="- topic/xref xref" href="../overview/ccf_95_known_issues.html">Known issues for
					combined cumulative fix</a> topic page to be aware of any known issues for
				the HCL Portal Version 9.5 CF releases.</p>
</section>
<section class="- topic/section section" id="new_cf__review_supported_hardware_software" data-ofbid="new_cf__review_supported_hardware_software"><h2 class="- topic/title title sectiontitle">Review supported hardware/software requirements</h2>

<p class="- topic/p p">For Portal Version 8.5 CF08 or later, the minimum recommended WebSphere Application Server level
is at least WAS 8.5.5.6 with the corresponding JDK level applied.</p>
<p class="- topic/p p">Review the<a class="- topic/xref xref" href="https://support.hcltechsw.com/csm?id=kb_article&amp;sysparm_article=KB0013514&amp;sys_kb_id=17d6296a1b5df34077761fc58d4bcb03" target="_blank" rel="external noopener">Supported hardware and software
					requirements</a> article for this cumulative fix. If necessary, upgrade all
				hardware and software before applying this cumulative fix, including interim fixes
				required for WebSphere Application Server.</p>
<p class="- topic/p p">Note: Ensure that the optional WebSphere Application Server feature "EJBDeploy tool for pre-EJB
3.0 modules" is installed.</p>
</section>
<section class="- topic/section section" id="new_cf__check_fixes_installed_on_system" data-ofbid="new_cf__check_fixes_installed_on_system"><h2 class="- topic/title title sectiontitle">Check fixes installed on your system</h2>

<p class="- topic/p p">All temporary or interim fixes on your system must be removed before installing this cumulative
fix.</p>
<p class="- topic/p p">Also check whether the fixes installed on your system are included in the list of fixes provided
in this cumulative fix. If you have temporary or interim fixes on your system that are not included
in this cumulative fix then contact <a class="- topic/xref xref" href="https://support.hcltechsw.com/csm" target="_blank" rel="external noopener">HCL Software Support</a> for an updated version of those fixes or for more
information.</p>
</section>
<section class="- topic/section section" id="new_cf__special_instructions_DX_patterns" data-ofbid="new_cf__special_instructions_DX_patterns"><h2 class="- topic/title title sectiontitle">Special instructions pertaining to HCL Digital Experience Patterns</h2>

<p class="- topic/p p">Please note: These instructions are highlighted in this section but should be taken in the
context of the rest of this readme. For each step, assure that you have read thru this readme and
are taking all other documentation into account.</p>
<div class="- topic/p p">If the Portal server default profile (wp_profile) directory is owned by a different OS user than
the default binary directory (PortalServer), extra manual steps are needed before running
Installation Manager to update to the cumulative fix. <ol class="- topic/ol ol">
<li class="- topic/li li">Run the <span class="+ topic/keyword sw-d/cmdname keyword cmdname">chown</span> command to change ownership of the
							(<span class="+ topic/ph sw-d/filepath ph filepath">wp_profile</span>) directory to the same owner as
						PortalServer:
						<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>chown -R OSUser:admingroup /opt/IBM/WebSphere/wp_profile.</code></pre></li>
<li class="- topic/li li">Run the Installation Manager update for the Portal Version 8.5 CF as the user that owns
PortalServer.</li>
<li class="- topic/li li">Run the <span class="+ topic/keyword sw-d/cmdname keyword cmdname">chown</span> command to change ownership of the
							(<span class="+ topic/ph sw-d/filepath ph filepath">wp_profile</span>) tree back to the original owner:
						<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>chown -R Original-OSUser:admingroup /opt/IBM/WebSphere/(wp_profile)</code></pre></li>
<li class="- topic/li li">Run <code class="+ topic/ph pr-d/codeph ph codeph">applyCF.sh</code> as portaladmin the same owner as (wp_profile)</li>
</ol><ul class="- topic/ul ul">
<li class="- topic/li li">Note: <code class="+ topic/ph pr-d/codeph ph codeph">/opt/HCL/WebSphere</code> will vary depending on what the installation directory
actually is.</li>
<li class="- topic/li li">Note: <code class="+ topic/ph pr-d/codeph ph codeph">OSUser</code> will vary depending on which user owns the PortalServer
directory</li>
</ul></div>
</section>
<section class="- topic/section section" id="new_cf__ensure_wkplc_properties" data-ofbid="new_cf__ensure_wkplc_properties"><h2 class="- topic/title title sectiontitle">Ensure <code class="+ topic/ph pr-d/codeph ph codeph">wkplc</code> properties files are correct</h2>

<p class="- topic/p p">The HCL Portal upgrade will run several <code class="+ topic/ph pr-d/codeph ph codeph">ConfigEngine</code> scripts. These scripts
				depend on the <code class="+ topic/ph pr-d/codeph ph codeph">wkplc.properties</code> being up to date and accurate,
				particularly with the password properties. If you are using multiple profiles,
				verify that the information in each profile is correct.</p>
<div class="- topic/p p">
<ol class="- topic/ol ol">
<li class="- topic/li li">Edit the <code class="+ topic/ph pr-d/codeph ph codeph">&lt;wp_profile root&gt;/ConfigEngine/properties/wkplc.properties</code> file and
ensure the following values are set correctly:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>WasRemoteHostName=&lt;the hostname of your WAS instance&gt;
WasSoapPort=&lt;the soap port of your WAS instance&gt;
WasUserid=&lt;your WAS admin user&gt;
WasPassword=&lt;your WAS admin pwd&gt;
PortalAdminId=&lt;your Portal Admin ID&gt;
PortalAdminPwd=&lt;your Portal Admin password&gt;
WpsHostName=&lt;Your Portal hostname&gt;
WpsHostPort=&lt;The port you use to access Portal&gt;
WpsContextRoot=&lt;your Portal context root&gt;</code></pre></li>
<li class="- topic/li li">Edit the <code class="+ topic/ph pr-d/codeph ph codeph">&lt;wp_profile
root&gt;/ConfigEngine/properties/wkplc_dbdomain.properties</code> file and ensure the following
values are set correctly:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>release.DbPassword=&lt;your database user password&gt;
community.DbPassword=&lt;your database user password&gt;
customization.DbPassword=&lt;your database user password&gt;
jcr.DbPassword=&lt;your database user password&gt;
likeminds.DbPassword=&lt;your database user password&gt;
feedback.DbPassword=&lt;your database user password&gt;
</code></pre></li>
<li class="- topic/li li">Edit the <code class="+ topic/ph pr-d/codeph ph codeph">&lt;wp_profile root&gt;/ConfigEngine/properties/wkplc_comp.properties</code>
file and ensure the following values are set correctly:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>XmlAccessHost=&lt;your Portal hostname&gt;
XmlAccessPort=&lt;the port you use to access Portal&gt;</code></pre></li>
</ol>
</div>
<p class="- topic/p p">Note: If your server is configured with database runtime users, for example,
<code class="+ topic/ph pr-d/codeph ph codeph">feedback.DbRuntimeUser=&lt;your feedback database runtime user&gt;</code>, ensure to set their
password values correctly as well, for example, in <code class="+ topic/ph pr-d/codeph ph codeph">feedback.DbRuntimePassword=&lt;your feedback
database runtime user password&gt;</code>.</p>
</section>
<section class="- topic/section section" id="new_cf__unix_linux_windows_ibmi_cluster_cf" data-ofbid="new_cf__unix_linux_windows_ibmi_cluster_cf"><h2 class="- topic/title title sectiontitle">Unix, Linux, Windows, and IBM i:</h2>

<p class="- topic/p p">The update process removes plain text passwords from the <code class="+ topic/ph pr-d/codeph ph codeph">wkplc*.properties</code>
files. To keep these passwords in the properties files, include the following line in the
<code class="+ topic/ph pr-d/codeph ph codeph">wkplc.properties</code> file: <code class="+ topic/ph pr-d/codeph ph codeph">PWordDelete=false</code></p>
</section>
<section class="- topic/section section" id="new_cf__multiple_profile_considerations" data-ofbid="new_cf__multiple_profile_considerations"><h2 class="- topic/title title sectiontitle">Multiple profile considerations</h2>

<p class="- topic/p p">Verify that all of your profiles are at the same level before starting the upgrade or rollback.
All profiles that share the same Portal installation directory (multiple profile option) must be
manually upgraded after the IBM Installation Manager update completes. See the "Additional
configuration steps" for details.</p>
</section>
<section class="- topic/section section" id="new_cf__non_root_considerations" data-ofbid="new_cf__non_root_considerations"><h2 class="- topic/title title sectiontitle">Non-root considerations</h2>

<div class="- topic/p p">In Unix/Linux environments, you must install the cumulative fix as the same user which you used
to install HCL Portal originally. This could be either root or a non-root user. If you need to use a
non-root user, ensure the following conditions are met: <ul class="- topic/ul ul">
<li class="- topic/li li">If you are installing as a non-root user on Unix or Linux, the umask setting for your login
session must be set to 0022 or better. (umask is a setting that controls what file permissions are
set for newly created files and directories. A value of 0022 correspond to permission settings of
(rwxr-xr-x).) If the umask is not set appropriately by default, you must set it when you start
Installation Manager or when you open a command-line utility to run Installation Manager
commands.</li>
<li class="- topic/li li">The non-root user has a "ulimit - n" setting of at least 18192. This must be a number and not
"unlimited".</li>
<li class="- topic/li li">The non-root user owns the AppServer, PortalServer, ConfigEngine, and Portal profile directories
and has read/write access to all files in these directories. Permission settings of 755 (rwxr-xr-x)
are sufficient.</li>
<li class="- topic/li li">Do not use "sudo" or "su" to install the fix pack. Either use root explicitly or use a non-root
user that meets the above conditions.</li>
</ul></div>
<div class="- topic/p p">To open a command-line utility to run Installation Manager commands: <ol class="- topic/ol ol">
<li class="- topic/li li">Open a command line window.</li>
<li class="- topic/li li">Run this command to check your current umask setting: <pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>umask</code></pre></li>
<li class="- topic/li li">If necessary, run this command to set the umask: <pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>umask 0022</code></pre></li>
</ol></div>
</section>
<section class="- topic/section section" id="new_cf__antivirus_file_indexing" data-ofbid="new_cf__antivirus_file_indexing"><h2 class="- topic/title title sectiontitle">Anti-virus and file indexing software considerations (Windows only)</h2>

<p class="- topic/p p">As part of the CF upgrade process, new files will be created in the WebSphere installation
directory, as well as the user's temp directory. Anti-viruses and file indexing software (like
Google Desktop) have been known to lock newly created files as they are being scanned, which can
interfere with the upgrade process. If you find such software is interfering with the Portal CF upgrade
process contact the software vendor for further assistance. Note: If it is possible, we recommend to
exclude the WebSphere installation directory and the user's temp directory from being scanned by this
software during the upgrade. Or you can stop /disable these tools for the duration of the upgrade, and
re-enable them after the upgrade completes. However HCL does not recommend such modifications and instead
recommends to contact the software vendor for further assistance.</p>
</section>
<section class="- topic/section section" id="new_cf__special_considerations_was_85514" data-ofbid="new_cf__special_considerations_was_85514"><h2 class="- topic/title title sectiontitle">Special note for customers using WAS 8.5.5.14</h2>

<p class="- topic/p p">Support for WebSphere Application Server v8.5.5.14 will be added in Portal Cumulative Fix 16. If
you need to apply Portal Cumulative Fix 15 or earlier to a WAS v8.5.5.14 installation, you will need
to perform an additional manual step during the upgrade.</p>
<div class="- topic/p p">After running Installation Manager to install the new Portal code but before running the
<code class="+ topic/ph pr-d/codeph ph codeph">applyCF.sh</code> or <code class="+ topic/ph pr-d/codeph ph codeph">applyCF.bat</code> command to update the Portal profile,
perform these steps: <ol class="- topic/ol ol">
<li class="- topic/li li">Open a command Window and switch to the ConfigEngine home directory. By default this is:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>﻿Unix/Linux: /opt/IBM/WebSphere/ConfigEngine
Windows: C:\IBM\WebSphere\ConfigEngine
IBM i: /QIBM/ProdData/WebSphere/ConfigEngine</code></pre></li>
<li class="- topic/li li">Make a backup copy of the ConfigEngine script. This file is named
<code class="+ topic/ph pr-d/codeph ph codeph">ConfigEngine.bat</code> for Windows and <code class="+ topic/ph pr-d/codeph ph codeph">ConfigEngine.sh</code> for all other
platforms.</li>
<li class="- topic/li li">Make sure your user has write permissions for the script file and open it in a text editor.</li>
<li class="- topic/li li"> Look for the text <code class="+ topic/ph pr-d/codeph ph codeph">EJBDEPLOY_JAVA_HOME</code> in the script. If you do not find it, no further action is necessary and you can continue with the
installation. If you do find it, delete every line that contains the text
<code class="+ topic/ph pr-d/codeph ph codeph">EJBDEPLOY_JAVA_HOME</code> anywhere in the line. (There should be 3 such lines in the .sh
script and 2 lines in the .bat script.)</li>
<li class="- topic/li li">Save the file.</li>
</ol></div>
<p class="- topic/p p">You may now continue with the installation of the Portal CF.</p>
</section>
<section class="- topic/section section" id="new_cf__download_cumulative_fix" data-ofbid="new_cf__download_cumulative_fix"><h2 class="- topic/title title sectiontitle">Download the cumulative fix</h2>

<div class="- topic/p p">If you are installing the cumulative fix using a live repository, then you do not need to download the cumulative fix to your server. 
If you need to download the cumulative fix, then you can follow these steps.
<ol class="- topic/ol ol">
<li class="- topic/li li">Go and log in to 
	<a class="- topic/xref xref" href="https://support.hcltechsw.com/csm" target="_blank" rel="external noopener">HCL Software Support</a>
and download the latest zip file that corresponds to the installation on your system.</li>
<li class="- topic/li li">Create a directory and extract the zip file(s) into this directory. Inside the zip file is a readme file, sample response files 
(Server and Express only), and the actual cumulative fix file itself.</li>
<li class="- topic/li li">Create a sub-directory and extract the appropriate <code class="+ topic/ph pr-d/codeph ph codeph">WP8500CFnn_ zip</code> file to this directory. The extraction results in a <code class="+ topic/ph pr-d/codeph ph codeph">repository.config</code> 
file that is used by IBM Installation Manager during the update.</li>
</ol></div>
</section>
<section class="- topic/section section" id="new_cf__disabling_automatic_synchronization" data-ofbid="new_cf__disabling_automatic_synchronization"><h2 class="- topic/title title sectiontitle">Disabling automatic synchronization and stopping the node agents</h2>

<div class="- topic/p p">Ensure that automatic synchronization is disabled and that all node agents are stopped for all
Portal clusters in the cell. When the automatic synchronization is enabled, the node agent on each
node automatically contacts the deployment manager at startup and at every synchronization interval
to attempt to synchronize the node's configuration repository with the master repository managed by
the deployment manager. <ol class="- topic/ol ol">
<li class="- topic/li li">In the administrative console for the deployment manager, select <span class="+ topic/ph ui-d/uicontrol ph uicontrol">System
administration</span> then <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Node agents</span> in the navigation tree.</li>
<li class="- topic/li li">Click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">nodeagent</span> for the required node.</li>
<li class="- topic/li li">Click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">File Synchronization Service</span>.</li>
<li class="- topic/li li">Uncheck the <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Automatic Synchronization</span> check box and uncheck the
<span class="+ topic/ph ui-d/uicontrol ph uicontrol">Enable service at server startup</span> check box on the File Synchronization
Service page to disable the automatic synchronization feature and synchronization service at server
startup and then click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">OK</span>.</li>
<li class="- topic/li li">Repeat these steps for all other nodes to be upgraded.</li>
<li class="- topic/li li">Click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Save</span> to save the configuration changes to the master
repository.</li>
<li class="- topic/li li">Select <span class="+ topic/ph ui-d/uicontrol ph uicontrol">System administration</span> then <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Nodes</span> in the
navigation tree.</li>
<li class="- topic/li li">Select all nodes that are not synchronized, and click on
<span class="+ topic/ph ui-d/uicontrol ph uicontrol">Synchronize</span>.</li>
<li class="- topic/li li">Select <span class="+ topic/ph ui-d/uicontrol ph uicontrol">System administration</span> then <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Node agents</span> in
the navigation tree.</li>
<li class="- topic/li li">For the primary node and all additional nodes in all Portal clusters in the cell, select the
node agents and click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Stop</span>. If you do not stop the node agents the cumulative
fix configuration might fail.</li>
</ol></div>
</section>
<section class="- topic/section section" id="new_cf__upgrading_primary_node" data-ofbid="new_cf__upgrading_primary_node"><h2 class="- topic/title title sectiontitle">Upgrading the primary node</h2>

<div class="- topic/p p">There are several different methods to install the cumulative fix, and they are: <ul class="- topic/ul ul">
<li class="- topic/li li">Use a Graphical User Interface (GUI)</li>
<li class="- topic/li li">Use a live repository via the Graphical User Interface</li>
<li class="- topic/li li">Use a command line</li>
<li class="- topic/li li">Use silent mode installation</li>
<li class="- topic/li li">Use console mode installation</li>
</ul></div>
<p class="- topic/p p">Start with the step "Stopping IP traffic" then choose one method that is available for your
system. Follow the detailed steps for that option, and then proceed with the "Additional
configuration steps."</p>
<p class="- topic/p p">Note: Do not attempt to combine the steps for primary and secondary nodes. The update must be
performed first on the primary node and then on the additional nodes, according to the following
instructions. When instructed to stop or start the HCL Portal server, stop or start all Portal
server instances including vertical cluster members on the node.</p>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Stopping IP traffic (Required only if following the 24x7 single cluster
upgrade.)</span>
<ul class="- topic/ul ul">
<li class="- topic/li li">If you are using IP sprayers for load balancing to the cluster members, reconfigure the IP
sprayers to stop routing new requests to the Portal cluster member(s) on this node.</li>
<li class="- topic/li li">If you are using the Web server plug-in for load balancing, perform the following steps below to
stop traffic to the node.</li>
</ul> To stop traffic to the nods: <ol class="- topic/ol ol">
<li class="- topic/li li">In the Deployment Manager administrative console, click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Servers &gt; Clusters &gt;
WebSphere application server clusters &gt; cluster_name &gt; Cluster members</span> to obtain a view
of the collection of cluster members.</li>
<li class="- topic/li li">Locate the cluster member you are upgrading and change the value in the Configured weight column
to zero. NOTE: Record the previous value to restore the setting when the upgrade is complete.</li>
<li class="- topic/li li">Click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Update</span> to apply the change.</li>
</ol> Note that the web server plug-in will check periodically for configuration updates based on
the value of <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Refresh Configuration Interval</span> property for the Web server
plug-in (default value is 60 seconds). You can check this value on the Deployment Manager
administrative console by selecting <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Servers &gt; Server Types &gt; Web Servers &gt;
web_server_name &gt; Plug-in Properties</span>. If automatic propagation of the plug-in
configuration file is enabled on the web server(s) disable it from the Deployment Manager
administrative console by going to <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Servers &gt; Server Types &gt; Web Servers &gt; web_server_name
&gt; Plug-in Properties</span> and unchecking <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Automatically propagate plug-in
configuration file</span>. Once automatic plug-in generation and propagation is disabled, you
will need to manually generate and/or propagate the <code class="+ topic/ph pr-d/codeph ph codeph">plugin-cfg.xml</code> file to the Web
server.</div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Use a Graphical User Interface (available on Windows, Linux, and Unix operating
systems)</span>
<ol class="- topic/ol ol">
<li class="- topic/li li">Stop any active application servers and node agents by using the <code class="+ topic/ph pr-d/codeph ph codeph">stopServer</code> and
<code class="+ topic/ph pr-d/codeph ph codeph">stopNode</code> commands. To see which application servers are active, use the
<code class="+ topic/ph pr-d/codeph ph codeph">serverStatus</code> command from the <code class="+ topic/ph pr-d/codeph ph codeph">&lt;wp_profile&gt;/bin</code> directory and
again from the <code class="+ topic/ph pr-d/codeph ph codeph">&lt;cw_profile&gt;/bin</code> directory. If the Deployment Manager is
installed on the same server as one of the cluster nodes, you must also stop the Deployment Manager
using the <code class="+ topic/ph pr-d/codeph ph codeph">stopManager</code> command from the <code class="+ topic/ph pr-d/codeph ph codeph">&lt;dmgr&gt;/bin</code> directory.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>Unix/Linux: ./serverStatus.sh -all
Windows: serverStatus.bat -all</code></pre></li>
<li class="- topic/li li">Launch the IBM Installation Manager that was used to install HCL Portal Version 8.5.</li>
<li class="- topic/li li">Using Installation Manager, click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">File &gt; Preferences</span>.</li>
<li class="- topic/li li">Go to the <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Repositories</span> panel and click "Add Repository".</li>
<li class="- topic/li li">Navigate to the <code class="+ topic/ph pr-d/codeph ph codeph">repository.config</code> file mentioned earlier and select it.</li>
<li class="- topic/li li">Select <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Update</span> and follow the prompts to update HCL Portal.</li>
<li class="- topic/li li">After installation completes, proceed with the "Additional configuration steps."</li>
</ol></div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Use a command line (available on Windows, Linux, and Unix operating systems)</span>
<ol class="- topic/ol ol">
<li class="- topic/li li">If you are running an external web server, stop the web server.</li>
<li class="- topic/li li">Stop any active application servers and node agents by using the <code class="+ topic/ph pr-d/codeph ph codeph">stopServer</code> and <code class="+ topic/ph pr-d/codeph ph codeph">stopNode</code> 
commands. To see which application servers are active, use the <code class="+ topic/ph pr-d/codeph ph codeph">serverStatus</code> command from the 
<code class="+ topic/ph pr-d/codeph ph codeph">&lt;wp_profile&gt;/bin</code> directory and again from the <code class="+ topic/ph pr-d/codeph ph codeph">&lt;cw_profile&gt;/bin</code> directory. If the 
Deployment Manager is installed on the same server as one of the cluster nodes, you must also stop the Deployment Manager 
using the <code class="+ topic/ph pr-d/codeph ph codeph">stopManager</code> command from the <code class="+ topic/ph pr-d/codeph ph codeph">(dmgr)/bin</code> directory.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>Unix/Linux: ./serverStatus.sh -all
Windows: serverStatus.bat -all</code></pre></li>
<li class="- topic/li li">Open a command window and switch to the <code class="+ topic/ph pr-d/codeph ph codeph">eclipse/tools</code> sub-directory of
Installation Manager. By default, this is:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>Unix/Linux: /opt/IBM/InstallationManager/eclipse/tools
Windows: C:\Program Files\IBM\Installation Manager\eclipse\tools</code></pre></li>
<li class="- topic/li li">If you are installing the cumulative fix on HCL Portal Express, skip to Step 5. Otherwise, run
the following command to launch the installation program of Installation Manager. For Unix/Linux:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./imcl install com.ibm.websphere.PORTAL.SERVER.v85
	-repositories &lt;fullpath/to/repository.config&gt; -installationDirectory &lt;portal_server_root&gt;  
	-acceptLicense </code></pre>
For Windows:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>imcl.exe install com.ibm.websphere.PORTAL.SERVER.v85
	-repositories &lt;fullpath/to/repository.config&gt; 
	-installationDirectory &lt;portal_server_root&gt; 
	-acceptLicense</code></pre></li>
<li class="- topic/li li">For HCL Portal Express only (IBM i must use silent or console mode method): Run the following
command to launch the installation program of Installation Manager. In Linux:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./imcl install com.ibm.websphere.PORTAL.EXPRESS.v85
	-repositories (fullpath/to/repository.config) 
	-installationDirectory (portal_server_root) 
	-acceptLicense</code></pre>
In Windows:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>imcl.exe install com.ibm.websphere.PORTAL.EXPRESS.v85 
	-repositories &lt;fullpath/to/repository.config&gt; 
	-installationDirectory &lt;portal_server_root&gt; 
	-acceptLicense</code></pre>
NOTE: The commands are shown here on multiple lines for clarity, but the entire command must be
entered on one line. Include quotation marks around file paths that include spaces.</li>
<li class="- topic/li li">After installation completes, proceed with the "Additional configuration steps."</li>
</ol></div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Use silent mode installation (available on Windows, Linux, Unix, and IBM i operating
systems)</span>
<ol class="- topic/ol ol">
<li class="- topic/li li">Stop any active application servers and node agents by using the <code class="+ topic/ph pr-d/codeph ph codeph">stopServer</code> and <code class="+ topic/ph pr-d/codeph ph codeph">stopNode</code> commands. 
To see which application servers are active, use the <code class="+ topic/ph pr-d/codeph ph codeph">serverStatus</code> command from the <code class="+ topic/ph pr-d/codeph ph codeph">&lt;wp_profile)/bin</code> 
directory 
and again from the <code class="+ topic/ph pr-d/codeph ph codeph">&lt;cw_profile&gt;/bin</code> directory. If the Deployment Manager is installed on the same server as one of the 
cluster nodes, you must also stop the Deployment Manager using the <code class="+ topic/ph pr-d/codeph ph codeph">stopManager</code> command 
from the <code class="+ topic/ph pr-d/codeph ph codeph">&lt;dmgr&gt;/bin</code> directory.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>Unix/Linux: ./serverStatus.sh -all
Windows: serverStatus.bat -all
IBM i: serverStatus -all</code></pre>
</li>
<li class="- topic/li li">For IBM i only, Run the following command from qshell:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>chown QEJBSVR /QIBM/UserData/WebSphere/AppServer/V85/ND/profiles/cw_profile/ConfigEngine/properties/wkplc.properties</code></pre></li>
<li class="- topic/li li">Open a command window and switch to the <code class="+ topic/ph pr-d/codeph ph codeph">eclipse/tools</code> sub-directory of
Installation Manager. By default, this is:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>Unix/Linux: /opt/IBM/InstallationManager/eclipse/tools
Windows: C:\Program Files\IBM\Installation Manager\eclipse\tools
IBM i: /QIBM/ProdData/InstallationManager/eclipse/tools
</code></pre>
</li>
<li class="- topic/li li">Update the sample response file that is packaged with your cumulative fix level according to the
comments in the file. You can also record a response file to use to install the fix in silent mode.
Do note that the feature set listed in your response file must match the feature set you have
installed. You cannot add or remove features during the cumulative fix update. The feature set
listed in the sample response file is
<code class="+ topic/ph pr-d/codeph ph codeph">features='ce.install,portal.binary,portal.profile'</code>. If you do not have any profiles
on this node (because you are in the process of migration from a previous version of HCL Portal, or
installing an additional node for a cluster, or creating multiple profiles, or you originally
installed HCL Portal Version 8.5 as a binary install), then you should remove the 'portal.profile'
feature from the <code class="+ topic/ph pr-d/codeph ph codeph">features='ce.install,portal.binary'</code> list.</li>
<li class="- topic/li li">Run the following command to install in silent mode:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>imcl -acceptLicense -input &lt;Full_path_to_your_response_file&gt; -log (Full_Path_to_a_log_file) -showProgress</code></pre></li>
<li class="- topic/li li">After installation completes, proceed with the "Additional configuration steps."</li>
</ol></div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Use Console Mode installation (available on Windows, Linux, Unix and IBM i operating
systems)</span>
<ol class="- topic/ol ol">
<li class="- topic/li li">Stop any active application servers and node agents by using the <code class="+ topic/ph pr-d/codeph ph codeph">stopServer</code> and
<code class="+ topic/ph pr-d/codeph ph codeph">stopNode</code> commands. To see which application servers are active, use the
<code class="+ topic/ph pr-d/codeph ph codeph">serverStatus</code> command from the <code class="+ topic/ph pr-d/codeph ph codeph">(wp_profile)/bin</code> directory and again
from the <code class="+ topic/ph pr-d/codeph ph codeph">(cw_profile)/bin</code> directory. If the Deployment Manager is installed on the
same server as one of the cluster nodes, you must also stop the Deployment Manager using the
<code class="+ topic/ph pr-d/codeph ph codeph">stopManager</code> command from the <code class="+ topic/ph pr-d/codeph ph codeph">(dmgr)/bin</code> directory.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>Unix/Linux: ./serverStatus.sh -all
Windows: serverStatus.bat -all
IBM i: serverStatus -all</code></pre></li>
<li class="- topic/li li">For IBM i only, Run the following command from qshell:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>chown QEJBSVR /QIBM/UserData/WebSphere/AppServer/V85/ND/profiles/cw_profile/ConfigEngine/properties/wkplc.properties</code></pre></li>
<li class="- topic/li li">Open a command window and switch to the eclipse/tools sub-directory of Installation Manager. By
default, this is:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>Unix/Linux: /opt/IBM/InstallationManager/eclipse/tools
Windows: C:\Program Files\IBM\Installation Manager\eclipse\tools
IBM i: /QIBM/ProdData/InstallationManager/eclipse/tools</code></pre></li>
<li class="- topic/li li">Run the command to start the IBM Installation Manager in console mode. For Unix/Linux:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./imcl  -c</code></pre> For Windows: <pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>imcl.exe -c</code></pre> For IBM i:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./imcl  -c</code></pre>
</li>
<li class="- topic/li li">Add the repositories.</li>
<li class="- topic/li li">Select <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Update</span> and follow the prompts to update HCL Portal.</li>
<li class="- topic/li li">After installation completes, proceed with the "Additional configuration steps".</li>
</ol> To add the repositories: <ul class="- topic/ul ul">
<li class="- topic/li li">Enter P to go to the Preferences menu.</li>
<li class="- topic/li li">Enter 1 to go to the Repositories menu.</li>
<li class="- topic/li li">Enter D to add repositories.</li>
<li class="- topic/li li">Type the path for your HCL Portal Version 8.5 CF repository file.</li>
<li class="- topic/li li">Enter A to apply your repositories and return to the Preferences menu.</li>
<li class="- topic/li li">Enter R to return to the Main menu.</li>
</ul></div>
</section>
<section class="- topic/section section" id="new_cf__additional_config_steps_cf_cluster" data-ofbid="new_cf__additional_config_steps_cf_cluster"><h2 class="- topic/title title sectiontitle">Additional configuration steps</h2>

<p class="- topic/p p">If you have any profiles the following configuration steps are mandatory.</p>
<p class="- topic/p p">If you do not have any profiles at this point (because you are in the process of migration from a
previous version of HCL Portal), no additional configuration steps are necessary and you can
continue with the "Restoring IP traffic" steps described below.</p>
<p class="- topic/p p">Note: The following configuration steps should be run as the user who normally administers the
Portal Server, which may or may not be the same user who runs the installation program.</p>
<p class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Linux, Unix, Windows or IBM i</span> Use the following commands to update all
profiles. These steps must be repeated for each profile, if multiple profiles exist. All cluster
members and all profiles that share the same Portal installation directory (multiple profile option)
must be updated to the same level to complete the CF installation.</p>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Notes</span>
<ul class="- topic/ul ul">
<li class="- topic/li li">If a remote search server is used within this environment, it should be started before running the following commands.</li>
<li class="- topic/li li">Also, if a WAS update has occurred prior to running the CF update, it is recommended to run the following task:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>&lt;profile_root&gt;/bin/osgiCfgInit.sh|bat</code></pre></li>
</ul></div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Optional Note</span> To skip regeneration of the profile template, add the
following flag to the CF update command:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>ex. applyCF.sh -Dskip.profile.template.update=true</code></pre> If an updated template is
needed at a later time, this command can be run to do so at any time: <pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>ex. ConfigEngine.sh cf-create-profile-templates</code></pre><ol class="- topic/ol ol">
	<li class="- topic/li li">Ensure the <code class="+ topic/ph pr-d/codeph ph codeph">nodeagent</code> and HCL Portal servers are stopped on the profile
you intend to upgrade. The Deployment Manager must be started.</li>
<li class="- topic/li li">On the Farm Master Server execute the following command from within the path of the profile to configure: Do not that if
you are installing the CF on an empty portal, see the <cite class="- topic/cite cite">Special Considerations</cite> below
before running applyCF.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>Unix/Linux: &lt;profile_root&gt;/PortalServer/bin/applyCF.sh -DPortalAdminPwd=&lt;password&gt; -DWasPassword=&lt;password&gt;
Windows: &lt;profile_root&gt;\PortalServer\bin\applyCF.bat -DPortalAdminPwd=&lt;password&gt; -DWasPassword=&lt;password&gt;
IBM i: &lt;profile_root&gt;/PortalServer/bin/applyCF.sh -DPortalAdminPwd=&lt;password&gt; -DWasPassword=&lt;password&gt;</code></pre>
Important: If the applyCF command fails for any reason, check the error logs and correct error
conditions before re-running.</li>
<li class="- topic/li li">On the Farm Support Server execute the following command from within the path of the profile to
configure.</li>
</ol></div>
<p class="- topic/p p">Note: If the Farm Support Server only has read-only access to the Portal Binaries use the <code class="+ topic/ph pr-d/codeph ph codeph">-DSharedBinaries=true</code> flag with the <code class="+ topic/ph pr-d/codeph ph codeph">applyCF</code> command. 
<code class="+ topic/ph pr-d/codeph ph codeph">
Unix/Linux: &lt;profile_root&gt;/PortalServer/bin/applyCF.sh -DPortalAdminPwd=&lt;password&gt; -DWasPassword=&lt;password&gt; 
Windows: &lt;profile_root&gt;\PortalServer\bin\applyCF.bat -DPortalAdminPwd=&lt;password&gt; -DWasPassword=&lt;password&gt; 
IBM i: &lt;profile_root&gt;/PortalServer/bin/applyCF.sh -DPortalAdminPwd=&lt;password&gt; -DWasPassword=&lt;password&gt;</code>
Important: If the applyCF command fails for any reason, check the error logs and correct error conditions before re-running.
</p>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Special Consideration for empty portals</span>
If you are installing the CF on an empty portal then extra steps are required to avoid upgrade errors.
<ol class="- topic/ol ol">
	<li class="- topic/li li">If you have created any custom content on top of the empty portal, you must first use XMLAccess to export the Portal content.
From the <code class="+ topic/ph pr-d/codeph ph codeph">wp_profile_root/PortalServer/bin</code> directory run:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>xmlaccess.bat/sh -user Portal_admin_user -password Portal_admin_password -url http://&lt;myhost&gt;:&lt;port&gt;/wps/config -in &lt;Portal home&gt;/doc/xml-samples/Export.xml -out result.xml</code></pre>
Upgrade the portal profile to the new CF level.  Because many of the expected artifacts will not exist in an empty portal, 
you must define the "isEmptyPortal" property when performing this step:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>Unix/Linux: &lt;profile_root&gt;/PortalServer/bin/applyCF.sh -DisEmptyPortal=true -DPortalAdminPwd=&lt;password&gt; -DWasPassword=&lt;password&gt;
Windows: &lt;profile_root&gt;\PortalServer\bin\applyCF.bat -DisEmptyPortal=true -DPortalAdminPwd=&lt;password&gt; -DWasPassword=&lt;password&gt;
IBM i: &lt;profile_root&gt;/PortalServer/bin/applyCF.sh -DisEmptyPortal=true -DPortalAdminPwd=&lt;password&gt; -DWasPassword=&lt;password&gt;</code></pre>
Important: If the applyCF command fails for any reason, check the error logs and correct error conditions before continuing. Following a successful run of the applyCF script, re-run the empty-portal task to remove Portal artifacts that were reintroduced 
with the CF, as these may cause runtime errors.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>Unix/Linux : &lt;profile_root&gt;/ConfigEngine/ ./ConfigEngine.sh empty-portal -DWasPassword=&lt;password&gt; -DPortalAdminPwd=&lt;password&gt;
Windows:  &lt;profile_root&gt;/ConfigEngine/ ConfigEngine.bat empty-portal -DWasPassword=&lt;password&gt; -DPortalAdminPwd=&lt;password&gt;
IBM i: &lt;profile_root&gt;/ConfigEngine/  ConfigEngine.sh empty-portal -DWasPassword=&lt;password&gt; -DPortalAdminPwd=&lt;password&gt;</code></pre></li>
<li class="- topic/li li"> If you exported custom content in step #1 above, you can now use XMLAccess to reimport that content.  From the 
<code class="+ topic/ph pr-d/codeph ph codeph">wp_profile_root/PortalServer/bin</code> directory run:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>xmlaccess.bat/sh -user &lt;Portal_admin_user&gt; -password &lt;Portal_admin_password&gt; -url http://&lt;myhost&gt;:&lt;port&gt;/wps/config -in result.xml -out importResults.xml</code></pre></li>
</ol>
</div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Restoring IP traffic (Required only if following the 24x7 single cluster
upgrade)</span>
<ul class="- topic/ul ul">
<li class="- topic/li li">If you are using IP sprayers for load balancing, reconfigure the IP sprayers to restore traffic
to the upgraded node.</li>
<li class="- topic/li li">If you are using the Web server plug-in for load balancing, perform the following steps to
restore traffic to the upgraded node.</li>
</ul> To restore traffic to the upgraded node: <ol class="- topic/ol ol">
<li class="- topic/li li">In the Deployment Manager administrative console, click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Servers &gt; Clusters &gt;
WebSphere application server clusters &gt; cluster_name &gt; Cluster members</span> to obtain a view
of the collection of cluster members.</li>
<li class="- topic/li li">Locate the cluster member you upgraded and change the value in the Configured weight column back
to the original value.</li>
<li class="- topic/li li">Click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Update</span> to apply the change.</li>
</ol> If you previously disabled automatic propagation of the Web server(s), re-enable it now using
the Deployment Manager administration console by going to <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Servers &gt; Server Types &gt; Web
Servers &gt; web_server_name &gt; Plug-in Properties</span> and checking <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Automatically
propagate plug-in configuration file</span>. If you are not using automatic generation and
propagation for the Web server plug-in, manually generate and/or propagate the
<code class="+ topic/ph pr-d/codeph ph codeph">plugin-cfg.xml</code> file to the Web servers. </div>
</section>
<section class="- topic/section section" id="new_cf__upgraded_additional_nodes_cf_cluster" data-ofbid="new_cf__upgraded_additional_nodes_cf_cluster"><h2 class="- topic/title title sectiontitle">Upgrading additional nodes</h2>

<div class="- topic/p p">There are several different methods to install the cumulative fix, and they are: <ul class="- topic/ul ul">
<li class="- topic/li li">Use a Graphical User Interface (GUI)</li>
<li class="- topic/li li">Use a live repository via the Graphical User Interface</li>
<li class="- topic/li li">Use a command line</li>
<li class="- topic/li li">Use silent mode installation</li>
<li class="- topic/li li">Use console mode installation</li>
</ul>
</div>
<p class="- topic/p p">Start with the step "Stopping IP traffic for additional nodes" then choose one method that is
available for your system. Follow the detailed steps for that option, and then proceed with the
Additional configuration steps.</p>
<p class="- topic/p p">Note: Do not attempt to upgrade additional nodes until after completing the upgrade of the
primary node. The update for the primary must be performed and completed before the upgrade of any
additional nodes. Additional node upgrades can be performed sequentially or in parallel. Update the
additional nodes according to the following instructions. When instructed to stop or start the
HCL Portal server, stop or start all Portal server instances including vertical cluster
members on the node.</p>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Stopping IP traffic for additional nodes (Required only if following the 24x7 single
cluster upgrade)</span>
<ul class="- topic/ul ul">
<li class="- topic/li li">If you are using IP sprayers for load balancing to the cluster members, reconfigure the IP
sprayers to stop routing new requests to the Portal cluster member(s) on this node.</li>
<li class="- topic/li li">If you are using the Web server plug-in for load balancing, perform the following steps to stop
traffic to the node.</li>
</ul>
</div>
<div class="- topic/p p">To stop traffic to the node: <ol class="- topic/ol ol">
<li class="- topic/li li">In the Deployment Manager administrative console, click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Servers &gt; Clusters &gt; WebSphere
application server clusters &gt; cluster_name &gt; Cluster members</span> to obtain a view of the collection of
cluster members.</li>
<li class="- topic/li li">Locate the cluster member you are upgrading and change the value in the Configured weight column
to zero. NOTE: Record the previous value to restore the setting when the upgrade is complete.</li>
<li class="- topic/li li">Click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Update</span> to apply the change.</li>
</ol> Note that the web server plug-in will check periodically for configuration updates based on
the value of <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Refresh Configuration Interval</span> property for the Web server
plug-in (default value is 60 seconds). You can check this value on the Deployment Manager
administrative console by selecting <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Servers &gt; Server Types &gt; Web Servers &gt;
web_server_name &gt; Plug-in Properties</span>. Once automatic plug-in generation and propagation
is disabled, you will need to manually generate and/or propagate the <code class="+ topic/ph pr-d/codeph ph codeph">plugin-cfg.xml</code>
file to the Web servers.</div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Use a Graphical User Interface on additional nodes (available on Windows, Linux, and
Unix operating systems)</span>
<ol class="- topic/ol ol">
<li class="- topic/li li">Stop any active application servers and node agents by using the <code class="+ topic/ph pr-d/codeph ph codeph">stopServer</code> and
<code class="+ topic/ph pr-d/codeph ph codeph">stopNode</code> commands. To see which application servers are active, use the
<code class="+ topic/ph pr-d/codeph ph codeph">serverStatus</code> command from the <code class="+ topic/ph pr-d/codeph ph codeph">(wp_profile)/bin directory</code> and again
from the <code class="+ topic/ph pr-d/codeph ph codeph">cw_profile&gt;/bin</code> directory. If the Deployment Manager is installed on the
same server as one of the cluster nodes, you must also stop the Deployment Manager using the
<code class="+ topic/ph pr-d/codeph ph codeph">stopManager</code> command from the <code class="+ topic/ph pr-d/codeph ph codeph">(dmgr)/bin</code> directory.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>&gt;Unix/Linux: ./serverStatus.sh -all
Windows: serverStatus.bat -all</code></pre></li>
<li class="- topic/li li">Launch the IBM Installation Manager that was used to install HCL Portal Version 8.5</li>
<li class="- topic/li li">Using Installation Manager, click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">File &gt; Preferences</span>.</li>
<li class="- topic/li li">Go to the <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Repositories</span> panel and click "Add Repository".</li>
<li class="- topic/li li">Navigate to the <code class="+ topic/ph pr-d/codeph ph codeph">repository.config</code> file mentioned earlier and select it.</li>
<li class="- topic/li li">Select <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Update</span> and follow the prompts to update HCL Portal.</li>
<li class="- topic/li li">After installation completes, proceed with the "Additional configuration steps on additional
nodes."</li>
</ol>
</div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Use a live repository via the Graphical User Interface on additional nodes (available
on Windows, Linux, and Unix operating systems)</span>
<ol class="- topic/ol ol">
<li class="- topic/li li">Stop any active application servers and node agents by using the <code class="+ topic/ph pr-d/codeph ph codeph">stopServer</code> and
<code class="+ topic/ph pr-d/codeph ph codeph">stopNode</code> commands. To see which application servers are active, use the
<code class="+ topic/ph pr-d/codeph ph codeph">serverStatus</code> command from the <code class="+ topic/ph pr-d/codeph ph codeph">(wp_profile)/bin directory</code> and again
from the <code class="+ topic/ph pr-d/codeph ph codeph">cw_profile&gt;/bin</code> directory. If the Deployment Manager is installed on the
same server as one of the cluster nodes, you must also stop the Deployment Manager using the
<code class="+ topic/ph pr-d/codeph ph codeph">stopManager</code> command from the <code class="+ topic/ph pr-d/codeph ph codeph">(dmgr)/bin</code> directory.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>&gt;Unix/Linux: ./serverStatus.sh -all
Windows: serverStatus.bat -all</code></pre></li>
<li class="- topic/li li">Launch the IBM Installation Manager that was used to install HCL Portal Version 8.5</li>
<li class="- topic/li li">Using Installation Manager, click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">File &gt; Preferences</span>.</li>
<li class="- topic/li li">Go to the <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Repositories</span> panel and click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Search service
repositories</span> during installation and updates. Click apply.</li>
<li class="- topic/li li">Select <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Update</span> and follow the prompts to update HCL Portal.</li>
<li class="- topic/li li">After installation completes, proceed with the "Additional configuration steps on additional
nodes."</li>
</ol>
</div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Use a command line on additional nodes (available on Windows, Linux, and Unix operating
systems)</span>
<ol class="- topic/ol ol">
<li class="- topic/li li">Stop any active application servers and node agents by using the <code class="+ topic/ph pr-d/codeph ph codeph">stopServer</code> and
<code class="+ topic/ph pr-d/codeph ph codeph">stopNode</code> commands. To see which application servers are active, use the
<code class="+ topic/ph pr-d/codeph ph codeph">serverStatus</code> command from the <code class="+ topic/ph pr-d/codeph ph codeph">(wp_profile)/bin directory</code> and again
from the <code class="+ topic/ph pr-d/codeph ph codeph">cw_profile&gt;/bin</code> directory. If the Deployment Manager is installed on the
same server as one of the cluster nodes, you must also stop the Deployment Manager using the
<code class="+ topic/ph pr-d/codeph ph codeph">stopManager</code> command from the <code class="+ topic/ph pr-d/codeph ph codeph">(dmgr)/bin</code> directory.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>&gt;Unix/Linux: ./serverStatus.sh -all
Windows: serverStatus.bat -all</code></pre></li>
<li class="- topic/li li">Open a command window and switch to the <span class="+ topic/ph ui-d/uicontrol ph uicontrol">eclipse/tools</span> sub-directory of
Installation Manager. By default, this is:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>Unix/Linux: /opt/IBM/InstallationManager/eclipse/tools
Windows: C:\Program Files\IBM\Installation Manager\eclipse\tools</code></pre></li>
<li class="- topic/li li">If you are installing the cumulative fix on HCL Portal Express, skip to step 5. Otherwise, run
the following command to launch the installation program of Installation Manager. Do note that the
commands are shown here on multiple lines for clarity, but the entire command must be entered on one
line. Include quotation marks around file paths that include spaces. For Unix or Linux:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
./imcl install com.ibm.websphere.PORTAL.SERVER.v85
-repositories &lt;fullpath/to/repository.config&gt; 
-installationDirectory &lt;portal_server_root&gt; 
-acceptLicense
</code></pre>
For Windows:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
imcl.exe install com.ibm.websphere.PORTAL.SERVER.v85 
-repositories &lt;fullpath/to/repository.config&gt; 
-installationDirectory &lt;portal_server_root&gt; 
-acceptLicense
</code></pre>
</li>
<li class="- topic/li li">HCL Portal Express only (IBM i must use silent or console mode method): Run the following
command to launch the installation program of Installation Manager). Do note that the commands are
shown here on multiple lines for clarity, but the entire command must be entered on one line.
Include quotation marks around file paths that include spaces. For Linux:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
./imcl install com.ibm.websphere.PORTAL.EXPRESS.v85 
-repositories &lt;fullpath/to/repository.config&gt; 
-installationDirectory &lt;portal_server_root&gt; 
-acceptLicense</code></pre>
For Windows:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
imcl.exe install com.ibm.websphere.PORTAL.EXPRESS.v85
-repositories &lt;fullpath/to/repository.config&gt; 
-installationDirectory &lt;portal_server_root&gt; 
-acceptLicense
</code></pre></li>
<li class="- topic/li li">After installation completes, proceed with the "Additional configuration steps on additional
nodes."</li>
</ol>
</div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Use silent mode installation on additional nodes (available on Windows, Linux, Unix,
and IBM i operating systems)</span>
<ol class="- topic/ol ol">
<li class="- topic/li li">Stop any active application servers and node agents by using the <code class="+ topic/ph pr-d/codeph ph codeph">stopServer</code> and
<code class="+ topic/ph pr-d/codeph ph codeph">stopNode</code> commands. To see which application servers are active, use the
<code class="+ topic/ph pr-d/codeph ph codeph">serverStatus</code> command from the <code class="+ topic/ph pr-d/codeph ph codeph">(wp_profile)/bin</code> directory and again
from the <code class="+ topic/ph pr-d/codeph ph codeph">(cw_profile)/bin</code> directory. If the Deployment Manager is installed on the
same server as one of the cluster nodes, you must also stop the Deployment Manager using the
<code class="+ topic/ph pr-d/codeph ph codeph">stopManager</code> command from the <code class="+ topic/ph pr-d/codeph ph codeph">(dmgr)/bin</code> directory.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: ./serverStatus.sh -all
Windows: serverStatus.bat -all
IBM i: serverStatus -all</code></pre></li>
<li class="- topic/li li">For IBM i only, Run the following command from qshell:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
chown QEJBSVR /QIBM/UserData/WebSphere/AppServer/V85/ND/profiles/cw_profile/ConfigEngine/properties/wkplc.properties</code></pre></li>
<li class="- topic/li li">Open a command window and switch to the eclipse/tools sub-directory of Installation Manager. By
default, this is:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: /opt/IBM/InstallationManager/eclipse/tools
Windows: C:\Program Files\IBM\Installation Manager\eclipse\tools
IBM i: /QIBM/ProdData/InstallationManager/eclipse/tools</code></pre>
</li>
<li class="- topic/li li">Update the sample response file that is packaged with your cumulative fix level according to the
comments in the file. You can also record a response file to use to install the fix in silent mode.
Do note that the feature set listed in your response file must match the feature set you have
installed. You cannot add or remove features during the cumulative fix update. The feature set
listed in the sample response file is:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>features='ce.install,portal.binary,portal.profile'</code></pre> If you do not have any
profiles on this node (because you are in the process of migration from a previous version of HCL
Portal, or installing an additional node for a cluster, or creating multiple profiles, or you
originally installed HCL Portal Version 8.5 as a binary install), then you should remove the
'portal.profile' feature from the <span class="+ topic/ph ui-d/uicontrol ph uicontrol">features='ce.install,portal.binary'</span>
list.</li>
<li class="- topic/li li">Run the following command to install in silent mode:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
imcl -acceptLicense -input &lt;Full_path_to_your_response_file&gt; -log &lt;Full_Path_to_a_log_file&gt; -showProgress</code></pre>
</li>
<li class="- topic/li li">After installation completes, proceed with the "Additional configuration steps on additional
nodes."</li>
</ol>
</div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Use Console Mode installation on additional nodes (available on Windows, Linux, Unix
and IBM i operating systems)</span>
<ol class="- topic/ol ol">
<li class="- topic/li li">Stop any active application servers and node agents by using the <code class="+ topic/ph pr-d/codeph ph codeph">stopServer</code> and
<code class="+ topic/ph pr-d/codeph ph codeph">stopNode</code> commands. To see which application servers are active, use the
<code class="+ topic/ph pr-d/codeph ph codeph">serverStatus</code> command from the <code class="+ topic/ph pr-d/codeph ph codeph">(wp_profile)/bin</code> directory and again
from the <code class="+ topic/ph pr-d/codeph ph codeph">(cw_profile)/bin</code> directory. If the Deployment Manager is installed on the
same server as one of the cluster nodes, you must also stop the Deployment Manager using the
<code class="+ topic/ph pr-d/codeph ph codeph">stopManager</code> command from the <code class="+ topic/ph pr-d/codeph ph codeph">(dmgr)/bin</code> directory.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: ./serverStatus.sh -all
Windows: serverStatus.bat -all
IBM i: serverStatus -all</code></pre></li>
<li class="- topic/li li">For IBM i only, Run the following command from qshell:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
chown QEJBSVR /QIBM/UserData/WebSphere/AppServer/V85/ND/profiles/cw_profile/ConfigEngine/properties/wkplc.properties</code></pre></li>
<li class="- topic/li li">Open a command window and switch to the <code class="+ topic/ph pr-d/codeph ph codeph">eclipse/tools</code> sub-directory of
Installation Manager. By default, this is: &gt;&gt;&gt;&gt;&gt;&gt;&gt; 329a76e1666fc09ae889a59db9ed2c7e115bb8ce
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: /opt/IBM/InstallationManager/eclipse/tools
Windows: C:\Program Files\IBM\Installation Manager\eclipse\tools
IBM i: /QIBM/ProdData/InstallationManager/eclipse/tools</code></pre>
</li>
<li class="- topic/li li"> Run the command to start the IBM Installation Manager in console mode. For Unix or Linux:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>/imcl  -c</code></pre> Windows: <pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>imcl.exe -c</code></pre> IBM i:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./imcl  -c</code></pre>
</li>
<li class="- topic/li li">Complete the following steps to add the repositories.</li>
<li class="- topic/li li">Select Update and follow the prompts to update HCL Portal.</li>
<li class="- topic/li li">After installation completes, proceed with the "Additional configuration steps".</li>
</ol> To add the repositories: <ol class="- topic/ol ol">
<li class="- topic/li li">Enter P to go to the Preferences menu.</li>
<li class="- topic/li li">Enter 1 to go to the Repositories menu.</li>
<li class="- topic/li li">Enter D to add repositories.</li>
<li class="- topic/li li">Type the path for your HCL Portal Version 8.5 CF repository file.</li>
<li class="- topic/li li">Enter A to apply your repositories and return to the Preferences menu.</li>
<li class="- topic/li li">Enter R to return to the Main menu.</li>
</ol>
</div>
</section>
<section class="- topic/section section" id="new_cf__additional_config_steps_additional_nodes" data-ofbid="new_cf__additional_config_steps_additional_nodes"><h2 class="- topic/title title sectiontitle">Additional configuration steps on additional nodes</h2>

<p class="- topic/p p">If you have any profiles the following configuration steps are mandatory.</p>
<p class="- topic/p p">If you do not have any profiles at this point (because you are in the process of migration from a previous version of HCL Portal), 
no additional configuration steps are necessary and you can continue with the "Restoring IP traffic" steps described below.</p>
<p class="- topic/p p">Note: The following configuration steps should be run as the user who normally administers the Portal Server, which may or may not 
be the same user who runs the installation program.</p>
<p class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Linux, Unix, Windows or IBM i</span>
Use the following commands to update all profiles.
These steps must be repeated for each profile, if multiple profiles exist.
All cluster members and all profiles that share the same Portal installation directory (multiple profile option) must be updated to the 
same level to complete the CF installation.</p>
<div class="- topic/p p">Notes:
<ul class="- topic/ul ul">
<li class="- topic/li li">If a remote search server is used within this environment, it should be started before running the following commands.</li>
<li class="- topic/li li">Also, if a WAS update has occurred prior to running the CF update, it is recommended to run the following task:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
&lt;profile_root&gt;/bin/osgiCfgInit.sh|bat</code></pre></li></ul>
</div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Optional Note</span>
To skip regeneration of the profile template, add the following flag to the CF update command:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
ex. applyCF.sh -Dskip.profile.template.update=true</code></pre>
If an updated template is needed at a later time, this command can be run to do so at any time:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
ex. ConfigEngine.sh cf-create-profile-templates</code></pre>
</div>
<div class="- topic/p p">
<ol class="- topic/ol ol">
	<li class="- topic/li li">Ensure the nodeagent and HCL Portal servers are stopped on the profile you intend to upgrade. The Deployment Manager must be 
started.</li>
<li class="- topic/li li">
Execute the following command from within the path of the profile to configure. Do note that if you are installing the CF on an empty 
portal, see the *Special Considerations* below before running applyCF.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: &lt;profile_root&gt;/PortalServer/bin/applyCF.sh -DPortalAdminPwd=&lt;password&gt; -DWasPassword=&lt;password&gt;
Windows: &lt;profile_root&gt;\PortalServer\bin\applyCF.bat -DPortalAdminPwd=&lt;password&gt; -DWasPassword=&lt;password&gt;
IBM i: &lt;profile_root&gt;/PortalServer/bin/applyCF.sh -DPortalAdminPwd=&lt;password&gt; -DWasPassword=&lt;password&gt;
</code></pre>
Important: If the applyCF command fails for any reason, check the error logs and correct error conditions before re-running.
</li>
<li class="- topic/li li">Verify that your system is operational by entering the server's URL in a browser and logging in to browse the content.
</li>
</ol>
</div>
<p class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Special Consideration for empty portals</span>
If you are installing the CF on an empty portal then extra steps are required to avoid upgrade errors.
</p>
<div class="- topic/p p">
<ol class="- topic/ol ol">
<li class="- topic/li li">If you have created any custom content on top of the empty portal, you must first use <code class="+ topic/ph pr-d/codeph ph codeph">xmlaccess</code> to export the Portal content.
From the  <code class="+ topic/ph pr-d/codeph ph codeph">wp_profile_root/PortalServer/bin</code> directory run:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
xmlaccess.bat/sh -user Portal_admin_user -password Portal_admin_password -url http://&lt;myhost&gt;:&lt;port&gt;/wps/config -in &lt;Portal home&gt;/doc/xml-samples/Export.xml -out result.xml
</code></pre></li>
<li class="- topic/li li">Upgrade the portal profile to the new CF level.  Because many of the expected artifacts will not exist in an empty portal, 
you must define the "isEmptyPortal" property when performing this step:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: &lt;profile_root&gt;/PortalServer/bin/applyCF.sh -DisEmptyPortal=true -DPortalAdminPwd=&lt;password&gt; -DWasPassword=&lt;password&gt;
Windows: &lt;profile_root&gt;\PortalServer\bin\applyCF.bat -DisEmptyPortal=true -DPortalAdminPwd=&lt;password&gt; -DWasPassword=&lt;password&gt;
IBM i: &lt;profile_root&gt;/PortalServer/bin/applyCF.sh -DisEmptyPortal=true -DPortalAdminPwd=&lt;password&gt; -DWasPassword=&lt;password&gt;
</code></pre>
Important: If the applyCF command fails for any reason, check the error logs and correct error conditions before continuing.
</li>
<li class="- topic/li li">Following a successful run of the applyCF script, re-run the empty-portal task to remove Portal artifacts that were reintroduced with 
the CF, as these may cause runtime errors.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux : &lt;profile_root&gt;/ConfigEngine/ ./ConfigEngine.sh empty-portal -DWasPassword=&lt;password&gt; -DPortalAdminPwd=&lt;password&gt;
Windows:  &lt;profile_root&gt;/ConfigEngine/ ConfigEngine.bat empty-portal -DWasPassword=&lt;password&gt; -DPortalAdminPwd=&lt;password&gt;
IBM® i: &lt;profile_root&gt;/ConfigEngine/  ConfigEngine.sh empty-portal -DWasPassword=&lt;password&gt; -DPortalAdminPwd=&lt;password&gt;
</code></pre></li>
<li class="- topic/li li">If you exported custom content in step #1 above, you can now use XMLAccess to reimport that content.  From the  
wp_profile_root/PortalServer/bin directory run:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
      xmlaccess.bat/sh -user &lt;Portal_admin_user&gt;&gt; -password &lt;Portal_admin_password&gt; -url http://&lt;myhost&gt;:&lt;port&gt;/wps/config -in result.xml -out importResults.xml
</code></pre></li>
</ol>
</div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Restoring IP traffic (Required only if following the 24x7 single cluster upgrade.)</span>
<ul class="- topic/ul ul">
<li class="- topic/li li">If you are using IP sprayers for load balancing, reconfigure the IP sprayers to restore traffic to the upgraded node.</li>
<li class="- topic/li li">If you are using the Web server plug-in for load balancing, perform the following steps to restore traffic to the upgraded node.</li>
</ul>
</div>
<div class="- topic/p p">If you are using the Web server plug-in for load balancing, perform the following steps to
restore traffic to the upgraded node: <ol class="- topic/ol ol">
<li class="- topic/li li"> In the Deployment Manager administrative console, click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Servers &gt; Clusters &gt;
WebSphere application server clusters &gt; cluster_name &gt; Cluster members</span> to obtain a view
of the collection of cluster members.</li>
<li class="- topic/li li">Locate the cluster member you upgraded and change the value in the Configured weight column back
to the original value.</li>
<li class="- topic/li li">Click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Update</span> to apply the change.</li>
</ol> If you are not using automatic generation and propagation for the Web server plug-in, manually generate and/or propagate the <code class="+ topic/ph pr-d/codeph ph codeph">plugin-cfg.xml</code> file to the Web servers.</div>
</section>
<section class="- topic/section section" id="new_cf__finalizing_upgrade_cf_cluster_85" data-ofbid="new_cf__finalizing_upgrade_cf_cluster_85"><h2 class="- topic/title title sectiontitle">Finalizing the upgrade</h2>

<div class="- topic/p p">1. Re-enable automatic synchronization on all nodes in the cluster if you disabled it earlier.
<ul class="- topic/ul ul">
<li class="- topic/li li">In the administrative console for the deployment manager, select System administration &gt; Node agents in the navigation tree.</li>
<li class="- topic/li li">Click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">nodeagent</span> for the required node.</li>
<li class="- topic/li li">Click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">File Synchronization Service</span>.</li>
<li class="- topic/li li">Check the <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Automatic Synchronization</span> check box to enable the automatic synchronization feature and check the 
<span class="+ topic/ph ui-d/uicontrol ph uicontrol">Enable service at server startup</span> check box to enable the synchronization service at server startup on the 
File Synchronization Service page and then click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">OK</span>.</li>
<li class="- topic/li li">Repeat these steps for all remaining nodes.</li>
<li class="- topic/li li">Click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Save</span> to save the configuration changes to the master repository.</li>
<li class="- topic/li li">Select <span class="+ topic/ph ui-d/uicontrol ph uicontrol">System administration &gt; Nodes</span> in the navigation tree.</li>
<li class="- topic/li li">Select all nodes that are not synchronized, and click on <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Synchronize</span>.</li>
<li class="- topic/li li">Select <span class="+ topic/ph ui-d/uicontrol ph uicontrol">System administration &gt; Node agents</span> in the navigation tree.</li>
<li class="- topic/li li">Select all node agents where automatic synchronization has been re-enabled and click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Restart</span>.</li>
</ul>
</div>
<p class="- topic/p p">2. If there is a custom theme that contains a static content WAR and the com.hcl.portal.resource.blacklist and 
com.hcl.portal.resource.whitelist context parameters have not yet been added to the web.xml file, Go and log in to 
	<a class="- topic/xref xref" href="https://support.hcltechsw.com/csm" target="_blank" rel="external noopener">HCL Software Support</a> 
to find detailed information associated with Security Bulletin: Fix Available for Security Vulnerability in HCL Digital Experience 
(CVE-2014-8912). The changes associated with this security bulletin (APAR PI47714) can cause custom themes to produce a lot of warning 
messages in the logs resulting in a significant performance penalty. The custom theme must be redeployed before the changes will take effect.</p>
<p class="- topic/p p">3. If necessary, redeploy any customizations, including JSPs, to the WCM portlets (if using Web Content Manager), any other portlets, or any 
other Portal enterprise applications, if these were customized prior to installing the cumulative fix.</p>
<p class="- topic/p p">4. If you have set up a remote search server or document conversion server for use with HCL Portal Version 8.5, then whenever you apply 
a cumulative fix to the portal server, you should also apply the corresponding cumulative fix to the remote server. Refer to the 
<cite class="- topic/cite cite">HCL Portal Version 8.5 combined cumulative fix instructions: remote search</cite> for the details of applying a cumulative fix to the 
remote server.</p>
<p class="- topic/p p">5. Go and log in to 
	<a class="- topic/xref xref" href="https://support.hcltechsw.com/csm" target="_blank" rel="external noopener">HCL Software Support</a> 
to find documentation to see if Configuration Changes and Options introduced in HCL Digital Experience Version 8.5 Combined Cumulative 
Fixes applies to your environment.</p>
<div class="- topic/p p">6. If using HCL Web Content Manager and have installed any official extensions (such as the WCM Multilingual Solution (MLS) or WCM 
Social Media Publisher (SMP)), then run the following task to update them. This task needs to be run for primary and additional nodes.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: &lt;profile_root&gt;/ConfigEngine/ConfigEngine.sh action-update-wcm-extensions -DWasPassword=&lt;password&gt; -DPortalAdminPwd=&lt;password&gt;
Windows: &lt;profile_root&gt;\ConfigEngine\ConfigEngine.bat action-update-wcm-extensions -DWasPassword=&lt;password&gt; -DPortalAdminPwd=&lt;password&gt;
IBM i: &lt;profile_root&gt;/ConfigEngine/ConfigEngine.sh action-update-wcm-extensions -DWasPassword=&lt;password&gt; -DPortalAdminPwd=&lt;password&gt;
</code></pre>
The task can be run even if you are not sure if you had the extensions enabled. If you want to check if they were enabled the following 
tasks can be used:
<ul class="- topic/ul ul">
<li class="- topic/li li">For MLS use <code class="+ topic/ph pr-d/codeph ph codeph">ConfigEngine.sh|bat action-is-wcm-mls-enabled</code></li>
<li class="- topic/li li">or SMP use <code class="+ topic/ph pr-d/codeph ph codeph">ConfigEngine.sh|bat action-is-wcm-smp-enabled</code></li>
</ul>
</div>
<p class="- topic/p p">7. If you brought down the entire cluster to perform the upgrade (not maintaining 24 x 7 on a single cluster), and the automatic 
plug-in generation and propagation are disabled on your web server Plug-in properties, you will need to manually generate 
and/or propagate the <code class="+ topic/ph pr-d/codeph ph codeph">plugin-cfg.xml</code> file to the Web servers.</p>
<p class="- topic/p p">8. Clear the browser cache.</p>
<p class="- topic/p p">9. Please go to <cite class="- topic/cite cite">Recommended Updates for HCL Digital Experience</cite> to review and apply any recommended fixes.</p>
<div class="- topic/p p">10. Prior to CF07, it was recommended to set the DB2 database configuration parameter "dft_queryopt" to a value of 2 as this was tested 
to provide the best balance of query optimization time and query execution time for the SQL produced by the JCR.
For CF07 or later, this recommendation has been changed to use a value of 5 in conjunction with the testing and changes made to the 
JCR and JCR schema.
This setting is NOT updated automatically within your JCR Database Domain configuration as part of the CF07 (or later) upgrade.
This can be done manually by customers by executing the following SQL against the JCR Domain Database:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
db2 update db cfg for JCRDBNAME using DFT_QUERYOPT 5
</code></pre>
Or it can also be done by running the following Config Engine Task:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
configure-jcr-db2-dft-queryopt
</code></pre></div>
			<p class="- topic/p p"></p>
</section>
<section class="- topic/section section" id="new_cf__before_rollback_start" data-ofbid="new_cf__before_rollback_start"><h2 class="- topic/title title sectiontitle">Before you begin roll back</h2>

<p class="- topic/p p">NOTE: The steps in these sections for rolling back the cumulative fix describe how to roll back from a successful update to a 
previous level. However, rolling back from a failed update does not guarantee return to a dependable state. When an update fails, 
it is advised that you fix the cause of the failure and try again for a successful update; to return to a previous level, you must 
depend on a system and database backup and restore.</p>
<p class="- topic/p p">NOTE: Versions of Portal prior to CF12 do not support JDK 8. Therefore, if JDK 8 has been enabled in CF12 or later, the 
<code class="+ topic/ph pr-d/codeph ph codeph">managesdk</code> command must be used to switch back to JDK 7 or 7.1 before performing a rollback to CF11 or earlier.</p>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Limitations</span>
<ul class="- topic/ul ul">
<li class="- topic/li li">
Changing the server context root after upgrading is an unsupported rollback path. To roll back after changing the context root, 
you must first change the server context root to the values of the previous version.</li>
<li class="- topic/li li">When rolling back a CF install, if you have configured an empty context root you cannot roll back to a CF level that does not 
support the empty context root capability. For instance, if you have applied CF08 and have configured an empty context root you cannot 
rollback to CF07. If you have applied CF09 and have configured an empty context root you can roll back to CF08 but you would not be able 
to roll back if your previous CF level was CF07 or prior.</li>
<li class="- topic/li li">
Configuring HCL Portal from a stand-alone environment to a clustered environment after upgrading is an unsupported rollback path.</li>
</ul>
</div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Ensure wkplc properties files are correct for roll back</span>
The HCL Portal roll back will run several ConfigEngine scripts. These scripts depend on the <code class="+ topic/ph pr-d/codeph ph codeph">wkplc.properties</code> being up to date and 
accurate on each node in the cluster, particularly with the password properties. If you are using multiple profiles, verify that 
the information in each profile is correct. These steps need to be performed on all nodes.
<ol class="- topic/ol ol">
<li class="- topic/li li">Edit the <code class="+ topic/ph pr-d/codeph ph codeph">&lt;wp_profile root&gt;/ConfigEngine/properties/wkplc.properties</code> file and ensure the following values are set correctly:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
WasRemoteHostName=&lt;the hostname of your Dmgr&gt;
WasSoapPort=&lt;the soap port of your Dmgr&gt;
WasUserid=&lt;your WAS admin user&gt;
WasPassword=&lt;your WAS admin pwd&gt;
PortalAdminId=&lt;your Portal Admin ID&gt;
PortalAdminPwd=&lt;your Portal Admin password&gt;
WpsHostName=&lt;Your Portal hostname&gt;
WpsHostPort=&lt;The port you use to access Portal&gt;
WpsContextRoot=&lt;your Portal context root&gt;
</code></pre></li>
<li class="- topic/li li">
Edit the <code class="+ topic/ph pr-d/codeph ph codeph">&lt;wp_profile root&gt;/ConfigEngine/properties/wkplc_dbdomain.properties</code> file and ensure the following 
values are set correctly:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
release.DbPassword=&lt;your database user password&gt;
community.DbPassword=&lt;your database user password&gt;
customization.DbPassword=&lt;your database user password&gt;
jcr.DbPassword=&lt;your database user password&gt;
likeminds.DbPassword=&lt;your database user password&gt;
feedback.DbPassword=&lt;your database user password&gt;
</code></pre></li>
<li class="- topic/li li">
Edit the <code class="+ topic/ph pr-d/codeph ph codeph">&lt;wp_profile root&gt;/ConfigEngine/properties/wkplc_comp.properties</code> file and ensure the following values are set correctly:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
XmlAccessHost=&lt;your Portal hostname&gt;
XmlAccessPort=&lt;the port you use to access Portal&gt;
</code></pre>
</li>
</ol>
</div>
<p class="- topic/p p">Unix, Linux, Windows, and IBM i: The update process removes plain text passwords from the <code class="+ topic/ph pr-d/codeph ph codeph">wkplc*.properties</code> files. To keep these 
passwords in the properties files, include the following line in the wkplc.properties file: <code class="+ topic/ph pr-d/codeph ph codeph">PWordDelete=false</code></p>
</section>
<section class="- topic/section section" id="new_cf__disabling_auto_synchronization_stop_node_agents_rollback" data-ofbid="new_cf__disabling_auto_synchronization_stop_node_agents_rollback"><h2 class="- topic/title title sectiontitle">Disabling automatic synchronization and stopping the node agents for roll back</h2>

<div class="- topic/p p">Ensure that automatic synchronization is disabled and that all node agents are stopped for all Portal clusters 
in the cell. When the automatic synchronization is enabled, the node agent on each node automatically contacts the deployment 
manager at startup and at every synchronization interval to attempt to synchronize the node's configuration repository with 
the master repository managed by the deployment manager.
<ol class="- topic/ol ol">
<li class="- topic/li li">In the administrative console for the deployment manager, select <span class="+ topic/ph ui-d/uicontrol ph uicontrol">System administration &gt; Node agents</span>
 in the navigation tree.</li>
<li class="- topic/li li">Click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">nodeagent</span> for the required node.</li>
<li class="- topic/li li">Click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">File Synchronization Service</span>.</li>
<li class="- topic/li li">Uncheck the <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Automatic Synchronization</span> check box and uncheck the <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Enable service at server startup</span> 
check box on the File Synchronization Service page to disable the automatic synchronization feature and 
synchronization service at server startup and then click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">OK</span>.</li>
<li class="- topic/li li">Repeat these steps for all other nodes to be downgraded.</li>
<li class="- topic/li li">Click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Save</span> to save the configuration changes to the master repository.</li>
<li class="- topic/li li">Select <span class="+ topic/ph ui-d/uicontrol ph uicontrol">System administration &gt; Nodes</span> in the navigation tree.</li>
<li class="- topic/li li">Select all nodes that are not synchronized, and click on <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Synchronize</span>.</li>
<li class="- topic/li li">Select System <span class="+ topic/ph ui-d/uicontrol ph uicontrol">administration &gt; Node agents</span> in the navigation tree.</li>
<li class="- topic/li li">For the primary node and all additional nodes in all Portal clusters in the cell, select the node agents and click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Stop</span>. 
If you do not stop the node agents the cumulative fix configuration might fail.</li>
</ol>
</div>
</section>
<section class="- topic/section section" id="new_cf__rollback_primary_node_85_steps" data-ofbid="new_cf__rollback_primary_node_85_steps"><h2 class="- topic/title title sectiontitle">Steps to roll back the Primary node</h2>

<div class="- topic/p p">There are several different methods to roll back the cumulative fix, and they are:
<ul class="- topic/ul ul">
<li class="- topic/li li">Use a Graphical User Interface (GUI) to roll back</li>
<li class="- topic/li li">Use a command line roll back</li>
<li class="- topic/li li">Use silent mode roll back</li>
<li class="- topic/li li">Use console mode roll back</li>
</ul>
</div>
<p class="- topic/p p">Start with the step "Stopping IP traffic for roll back" then choose one method that is available for your system. 
Follow the detailed steps for that option, and then proceed with the Post Rollback Steps.</p>
<p class="- topic/p p">Note: Do not attempt to combine the steps for primary and secondary nodes. The roll back must be performed first on 
the primary node and then on the additional nodes, according to the following instructions.</p>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Stopping IP traffic for roll back (Required only if following the 24x7 single cluster roll back.)</span>
<ul class="- topic/ul ul">
<li class="- topic/li li">If you are using IP sprayers for load balancing to the cluster members, reconfigure the IP sprayers to stop routing new requests to the 
Portal cluster member(s) on this node.</li>
<li class="- topic/li li">If you are using the Web server plug-in for load balancing, perform the following steps to stop traffic to the node.</li>
</ul>
</div>
<div class="- topic/p p">If you are using the Web server plug-in for load balancing, perform the following steps to stop traffic to the node:
<ol class="- topic/ol ol">
<li class="- topic/li li">In the Deployment Manager administrative console, click 
<span class="+ topic/ph ui-d/uicontrol ph uicontrol">Servers &gt; Clusters &gt; WebSphere application server clusters &gt; cluster_name &gt; Cluster members</span> to obtain a view 
of the collection of cluster members.</li>
<li class="- topic/li li">Locate the cluster member you are downgrading and change the value in the Configured weight column to zero.
Do record the previous value to restore the setting when the downgrade is complete.</li>
<li class="- topic/li li">Click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Update</span> to apply the change.</li>
</ol>
Note that the web server plug-in will check periodically for configuration updates based on the value of 
<span class="+ topic/ph ui-d/uicontrol ph uicontrol">Refresh Configuration Interval</span> property for the Web server plug-in (default value is 60 seconds). 
You can check this value on the Deployment Manager administrative console by selecting 
<span class="+ topic/ph ui-d/uicontrol ph uicontrol">Servers &gt; Server Types &gt; Web Servers &gt; web_server_name &gt; Plug-in Properties</span>.
If automatic propagation of the plug-in configuration file is enabled on the web server(s) disable it from the 
Deployment Manager administrative console by going to 
<span class="+ topic/ph ui-d/uicontrol ph uicontrol">Servers &gt; Server Types &gt; Web Servers &gt; web_server_name &gt; Plug-in Properties</span> and unchecking 
<span class="+ topic/ph ui-d/uicontrol ph uicontrol"> Automatically propagate plug-in configuration file</span>.
Once automatic plug-in generation and propagation is disabled, you will need to manually generate and/or propagate the 
<code class="+ topic/ph pr-d/codeph ph codeph">plugin-cfg.xml</code> file to the Web servers.
</div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Use a Graphical User Interface to roll back (available on Windows, Linux, and Unix operating systems)</span>
<ol class="- topic/ol ol">
<li class="- topic/li li">Stop any active application servers and node agents by using the <code class="+ topic/ph pr-d/codeph ph codeph">stopServer</code> and <code class="+ topic/ph pr-d/codeph ph codeph">stopNode</code> commands. To see 
which application servers are 
active, use the <code class="+ topic/ph pr-d/codeph ph codeph">serverStatus</code> command from the &lt;wp_profile&gt;/bin directory and again from the &lt;cw_profile&gt;/bin directory. If the 
Deployment Manager is installed on the same server as one of the cluster nodes, you must also stop the Deployment Manager using the 
<code class="+ topic/ph pr-d/codeph ph codeph">stopManager</code> command from the &lt;dmgr&gt;/bin directory.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: ./serverStatus.sh -all
Windows: serverStatus.bat -all</code></pre>
</li>
<li class="- topic/li li">Launch the IBM Installation Manager that was used to install HCL Portal Version 8.5.</li>
<li class="- topic/li li">Select "Roll Back" on the Installation Manager main window and follow the prompts to roll HCL Portal back to the desired level.</li>
<li class="- topic/li li">After rollback completes, proceed with the"Post Rollback Steps."</li>
</ol>
</div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Use a command line to roll back (available on Windows, Linux, and Unix operating systems)</span>
<ol class="- topic/ol ol">
<li class="- topic/li li">Stop any active application servers and node agents by using the <code class="+ topic/ph pr-d/codeph ph codeph">stopServer</code> and <code class="+ topic/ph pr-d/codeph ph codeph">stopNode</code> commands. To see 
which application servers are 
active, use the <code class="+ topic/ph pr-d/codeph ph codeph">serverStatus</code> command from the &lt;wp_profile&gt;/bin directory and again from the &lt;cw_profile&gt;/bin directory. If the 
Deployment Manager is installed on the same server as one of the cluster nodes, you must also stop the Deployment Manager using the 
<code class="+ topic/ph pr-d/codeph ph codeph">stopManager</code> command from the &lt;dmgr&gt;/bin directory.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: ./serverStatus.sh -all
Windows: serverStatus.bat -all</code></pre>
</li>
<li class="- topic/li li">Open a command window and switch to the <code class="+ topic/ph pr-d/codeph ph codeph">eclipse/tools</code> sub-directory of
Installation Manager. By default, this is:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: /opt/IBM/InstallationManager/eclipse/tools
Windows: C:\Program Files\IBM\Installation Manager\eclipse\tools
</code></pre></li>
<li class="- topic/li li">If you are rolling back the cumulative fix on HCL Portal Express, skip to Step 5. Otherwise, run
the following command to launch the installation program of Installation Manager. Do note that the
commands are shown here on multiple lines for clarity, but the entire command must be entered on one
line. Include quotation marks around file paths that include spaces. For Unix/Linux:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
./imcl rollback com.ibm.websphere.PORTAL.SERVER.v85 
	-installationDirectory &lt;portal_server_root&gt;
</code></pre>
Windows:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
imcl.exe rollback com.ibm.websphere.PORTAL.SERVER.v85
	-installationDirectory &lt;portal_server_root&gt;
</code></pre></li>
<li class="- topic/li li">HCL Portal Express only (IBM i must use silent or console mode method): Run the following
command to launch the installation program of Installation Manager. Do note that the commands are
shown here on multiple lines for clarity, but the entire command must be entered on one line.
Include quotation marks around file paths that include spaces. For Linux:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
./imcl rollback com.hcl.websphere.PORTAL.EXPRESS.v85 
	-installationDirectory &lt;portal_server_root&gt;
</code></pre>
Windows:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
imcl.exe rollback com.ibm.websphere.PORTAL.EXPRESS.v85
	-installationDirectory &lt;portal_server_root&gt;
</code></pre></li>
<li class="- topic/li li">After roll back completes, proceed with the "Post Rollback Steps."</li>
</ol>
</div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Use silent mode to roll back (available on Windows, Linux, Unix, and IBM i operating systems)</span>
<ol class="- topic/ol ol">
<li class="- topic/li li">Stop any active application servers and node agents by using the <code class="+ topic/ph pr-d/codeph ph codeph">stopServer</code> and <code class="+ topic/ph pr-d/codeph ph codeph">stopNode</code> commands. To see 
which application servers are 
active, use the <code class="+ topic/ph pr-d/codeph ph codeph">serverStatus</code> command from the &lt;wp_profile&gt;/bin directory and again from the &lt;cw_profile&gt;/bin directory. If the 
Deployment Manager is installed on the same server as one of the cluster nodes, you must also stop the Deployment Manager using the 
<code class="+ topic/ph pr-d/codeph ph codeph">stopManager</code> command from the &lt;dmgr&gt;/bin directory.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: ./serverStatus.sh -all
Windows: serverStatus.bat -all
IBM i: serverStatus -all</code></pre></li>
<li class="- topic/li li"> For IBM i only, Run the following command from qshell:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
chown QEJBSVR /QIBM/UserData/WebSphere/AppServer/V85/ND/profiles/cw_profile/ConfigEngine/properties/wkplc.properties</code></pre>
</li>
<li class="- topic/li li">Open a command window and switch to the <code class="+ topic/ph pr-d/codeph ph codeph">eclipse/tools</code> sub-directory of
Installation Manager. By default, this is:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: /opt/IBM/InstallationManager/eclipse/tools
Windows: C:\Program Files\IBM\Installation Manager\eclipse\tools
IBM i: /QIBM/ProdData/InstallationManager/eclipse/tools</code></pre></li>
<li class="- topic/li li">
Update the sample response file that is packaged with your cumulative fix level according to the comments in the file.</li>
<li class="- topic/li li">Run the following command to roll back in silent mode:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
imcl -input &lt;Full_path_to_your_response_file&gt; -log &lt;Full_Path_to_a_log_file&gt; -showProgress</code></pre>
</li>
<li class="- topic/li li">
After roll back completes, proceed with the "Post Rollback Steps."</li>
</ol>
</div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Use Console Mode to roll back (available on Windows, Linux, Unix and IBM i operating systems)</span>
<ol class="- topic/ol ol">
<li class="- topic/li li">Stop any active application servers and node agents by using the <code class="+ topic/ph pr-d/codeph ph codeph">stopServer</code> and <code class="+ topic/ph pr-d/codeph ph codeph">stopNode</code> commands. To see 
which application servers are 
active, use the <code class="+ topic/ph pr-d/codeph ph codeph">serverStatus</code> command from the &lt;wp_profile&gt;/bin directory and again from the &lt;cw_profile&gt;/bin directory. If the 
Deployment Manager is installed on the same server as one of the cluster nodes, you must also stop the Deployment Manager using the 
<code class="+ topic/ph pr-d/codeph ph codeph">stopManager</code> command from the &lt;dmgr&gt;/bin directory.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: ./serverStatus.sh -all
Windows: serverStatus.bat -all
IBM i: serverStatus -all</code></pre></li>
<li class="- topic/li li"> For IBM i only, Run the following command from qshell:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
chown QEJBSVR /IBM/UserData/WebSphere/AppServer/V85/ND/profiles/cw_profile/ConfigEngine/properties/wkplc.properties</code></pre>
</li>
<li class="- topic/li li"> Open a command window and switch to the eclipse/tools sub-directory of Installation Manager. By
default, this is:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: /opt/IBM/InstallationManager/eclipse/tools
Windows: C:\Program Files\IBM\Installation Manager\eclipse\tools
IBM i: /QIBM/ProdData/InstallationManager/eclipse/tools</code></pre>
</li>
<li class="- topic/li li">
Run the command to start the IBM Installation Manager in console mode.
For Unix/Linux:<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
./imcl  -c
</code></pre>
Windows:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
imcl.exe -c
</code></pre>
IBM i:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
./imcl  -c
</code></pre>
</li>
<li class="- topic/li li">
Select Roll back and follow the prompts to roll back HCL Portal.</li>
<li class="- topic/li li">After installation completes, proceed with the "Post Rollback Steps."</li>
</ol>
</div>
</section>
<section class="- topic/section section" id="new_cf__post-rollback_steps_cf_cluster_85" data-ofbid="new_cf__post-rollback_steps_cf_cluster_85"><h2 class="- topic/title title sectiontitle">Post Rollback Steps</h2>

<p class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Linux, Unix, Windows or IBM i</span>
Use the following commands to roll back all profiles.
These steps must be repeated for each profile, if multiple profiles exist.
All cluster members and all profiles that share the same Portal installation directory 
(multiple profile option) must be updated to the same level to complete the CF installation.</p>
<p class="- topic/p p">Note: The following configuration steps should be run as the user who normally administers the Portal Server, which may or may not be 
the same user who runs the installation program.</p>
<p class="- topic/p p">Note: If a remote search server is used within this environment, it should be started before running the following commands.</p>
<p class="- topic/p p">1. Ensure the <code class="+ topic/ph pr-d/codeph ph codeph">nodeagent</code> and <code class="+ topic/ph pr-d/codeph ph codeph">HCL Portal and HCL Web Content Manager</code> servers are stopped on the profile you intend to 
rollback. The Deployment Manager must be started.</p>
<div class="- topic/p p">2. Run the following command from within the path of the profile to configure. Do note that if you are rolling back the CF on an empty 
portal then many of the expected artifacts will not exist and the rollbackCF command will fail. In this case you must define the 
"isEmptyPortal" property on the command line. Example: <code class="+ topic/ph pr-d/codeph ph codeph">rollbackCF.sh -DisEmptyPortal=true</code>
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: &lt;profile_root&gt;/PortalServer/bin/rollbackCF.sh -DPortalAdminPwd=&lt;password&gt; -DWasPassword=&lt;password&gt;
Windows: &lt;profile_root&gt;\PortalServer\bin\rollbackCF.bat -DPortalAdminPwd=&lt;password&gt; -DWasPassword=&lt;password&gt;
IBM i: &lt;profile_root&gt;/PortalServer/bin/rollbackCF.sh -DPortalAdminPwd=&lt;password&gt; -DWasPassword=&lt;password&gt;
</code></pre>
Important: If the rollbackCF command fails for any reason, check the error logs and correct error conditions, then stop 
<code class="+ topic/ph pr-d/codeph ph codeph">HCL Portal and HCL Web Content Manager</code> before re-running.</div>
<p class="- topic/p p">3. If you previously customized any configuration files in the <code class="+ topic/ph pr-d/codeph ph codeph">wp_profile_root/PortalServer/config</code> directory, 
check to see if rolling back the cumulative fix affected those files by restoring a version of the files that was saved when the 
cumulative fix was originally installed. If it did affect the files, you must perform the same customization on the restored version of 
each file.</p>
<p class="- topic/p p">4. Verify that your system is operational by entering the server's URL in a browser and logging in to browse the content.</p>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Restoring IP traffic after roll back (Required only if following the 24x7 single cluster roll back.)</span>
<ul class="- topic/ul ul">
<li class="- topic/li li">If you are using IP sprayers for load balancing, reconfigure the IP sprayers to restore traffic to the downgraded node.</li>
<li class="- topic/li li">If you are using the Web server plug-in for load balancing, perform the following steps to restore traffic to the downgraded node.</li>
</ul>
</div>
<div class="- topic/p p">If you are using the Web server plug-in for load balancing, perform the following steps to restore traffic to the downgraded node:
<ol class="- topic/ol ol">
<li class="- topic/li li">In the Deployment Manager administrative console, click 
<span class="+ topic/ph ui-d/uicontrol ph uicontrol">Servers &gt; Clusters &gt; WebSphere application server clusters &gt; cluster_name &gt; Cluster members</span> to obtain a view of 
the collection of cluster members.</li>
<li class="- topic/li li">Locate the cluster member you downgraded and change the value in the Configured weight column back to the original value.</li>
<li class="- topic/li li">Click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Update</span> to apply the change.
If you previously disabled automatic propagation of the Web server(s), re-enable it now using the Deployment Manager 
administration console by going to 
<span class="+ topic/ph ui-d/uicontrol ph uicontrol">Servers &gt; Server Types &gt; Web Servers &gt; web_server_name &gt; Plug-in Properties</span> and checking 
<span class="+ topic/ph ui-d/uicontrol ph uicontrol">Automatically propagate plug-in configuration file</span>. If you are not using automatic generation and 
propagation for the Web server plug-in, manually generate and/or propagate the <code class="+ topic/ph pr-d/codeph ph codeph">plugin-cfg.xml</code> file to the Web servers.
</li>
</ol>
</div>
</section>
<section class="- topic/section section" id="new_cf__rollback_additional_nodes_85" data-ofbid="new_cf__rollback_additional_nodes_85"><h2 class="- topic/title title sectiontitle">Steps to roll back additional nodes</h2>

<div class="- topic/p p">There are several different methods to roll back the cumulative fix on additional nodes, and they are:
<ul class="- topic/ul ul">
<li class="- topic/li li">Use a Graphical User Interface (GUI) to roll back on additional nodes</li>
<li class="- topic/li li">Use a command line roll back on additional nodes</li>
<li class="- topic/li li">Use silent mode roll back on additional nodes</li>
<li class="- topic/li li">Use console mode roll back on additional nodes</li>
</ul>
</div>
<p class="- topic/p p">Start with the step "Stopping IP traffic for roll back for additional nodes" then choose one method that is available for your system. 
Follow the detailed steps for that option, and then proceed with the Post Rollback Steps on additional nodes.</p>
<p class="- topic/p p">Note: Do not attempt to roll back additional nodes until after completing the roll back of the primary node. The roll back for the 
primary must be performed and completed before the roll back of any additional nodes. Additional node roll backs can be performed 
sequentially or in parallel. Roll back the additional nodes in accordance with the following instructions.</p>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Stopping IP traffic for roll back for additional nodes (Required only if following the 24x7 single cluster roll back.)</span>
<ul class="- topic/ul ul">
<li class="- topic/li li">If you are using IP sprayers for load balancing to the cluster members, reconfigure the IP sprayers to stop routing new requests to the 
Portal cluster member(s) on this node.</li>
<li class="- topic/li li">If you are using the Web server plug-in for load balancing, perform the following steps to stop traffic to the node:</li>
</ul>
If you are using the Web server plug-in for load balancing, perform the following steps to stop traffic to the node:
<ol class="- topic/ol ol">
<li class="- topic/li li">In the Deployment Manager administrative console, click 
<span class="+ topic/ph ui-d/uicontrol ph uicontrol">Servers &gt; Clusters &gt; WebSphere application server clusters &gt; cluster_name &gt; Cluster members</span> to obtain a view of 
the collection of cluster members.</li>
<li class="- topic/li li">Locate the cluster member you are downgrading and change the value in the Configured weight column to zero. Record the previous value 
to restore the setting when the downgrade is complete.</li>
<li class="- topic/li li">Click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Update</span> to apply the change.</li>
</ol>
Note that the web server plug-in will check periodically for configuration updates based on the value of 
<span class="+ topic/ph ui-d/uicontrol ph uicontrol">Refresh Configuration Interval</span> property for the Web server plug-in (default value is 60 seconds). You can check 
this value on the Deployment Manager administrative console by selecting 
<span class="+ topic/ph ui-d/uicontrol ph uicontrol">Servers &gt; Server Types &gt; Web Servers &gt; web_server_name &gt; Plug-in Properties</span>.
Once automatic plug-in generation and propagation is disabled, you will need to manually generate and/or propagate the 
<code class="+ topic/ph pr-d/codeph ph codeph">plugin-cfg.xml</code> file to the Web servers.</div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Use a Graphical User Interface to roll back on additional nodes (available on Windows, Linux, and Unix operating systems)</span>
<ol class="- topic/ol ol">
<li class="- topic/li li">Stop any active application servers and node agents by using the <code class="+ topic/ph pr-d/codeph ph codeph">stopServer</code> and <code class="+ topic/ph pr-d/codeph ph codeph">stopNode</code> commands. To see 
which application servers are 
active, use the <code class="+ topic/ph pr-d/codeph ph codeph">serverStatus</code> command from the &lt;wp_profile&gt;/bin directory and again from the &lt;cw_profile&gt;/bin directory. If the 
Deployment Manager is installed on the same server as one of the cluster nodes, you must also stop the Deployment Manager using the 
<code class="+ topic/ph pr-d/codeph ph codeph">stopManager</code> command from the &lt;dmgr&gt;/bin directory.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: ./serverStatus.sh -all
Windows: serverStatus.bat -all</code></pre></li>
<li class="- topic/li li"></li>
<li class="- topic/li li">Launch the IBM Installation Manager that was used to install HCL Portal Version 8.5.</li>
<li class="- topic/li li">Select "Roll Back" on the Installation Manager main window and follow the prompts to roll HCL Portal back to the desired level.</li>
<li class="- topic/li li">After roll back completes, proceed with the "Post Rollback Steps on additional nodes."</li>
</ol>
</div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Use a command line to roll back on additional nodes (available on Windows, Linux, and Unix operating systems)</span>
<ol class="- topic/ol ol">
<li class="- topic/li li">Stop any active application servers and node agents by using the <code class="+ topic/ph pr-d/codeph ph codeph">stopServer</code> and <code class="+ topic/ph pr-d/codeph ph codeph">stopNode</code> commands. To see 
which application servers are 
active, use the <code class="+ topic/ph pr-d/codeph ph codeph">serverStatus</code> command from the &lt;wp_profile&gt;/bin directory and again from the &lt;cw_profile&gt;/bin directory. If the 
Deployment Manager is installed on the same server as one of the cluster nodes, you must also stop the Deployment Manager using the 
<code class="+ topic/ph pr-d/codeph ph codeph">stopManager</code> command from the &lt;dmgr&gt;/bin directory.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: ./serverStatus.sh -all
Windows: serverStatus.bat -all</code></pre></li>
<li class="- topic/li li">Open a command window and switch to the eclipse/tools sub-directory of Installation Manager. By
default, this is:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: /opt/IBM/InstallationManager/eclipse/tools
Windows: C:\Program Files\IBM\Installation Manager\eclipse\tools
</code></pre></li>
<li class="- topic/li li">If you are rolling back the cumulative fix on HCL Portal Express, skip to Step 5. Otherwise, run
the following command to launch the installation program of Installation Manager. Do note that the
commands are shown here on multiple lines for clarity, but the entire command must be entered on one
line. Include quotation marks around file paths that include spaces. For Unix/Linux:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
./imcl rollback com.ibm.websphere.PORTAL.SERVER.v85 
	-installationDirectory &lt;portal_server_root&gt;
</code></pre>
Windows:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
imcl.exe rollback com.hcl.websphere.PORTAL.SERVER.v85 
	-installationDirectory &lt;portal_server_root&gt;
	</code></pre>
</li>
<li class="- topic/li li">HCL Portal Express only (IBM i must use silent or console mode method): Run the following
command to launch the installation program of Installation Manager. Do note that the commands are
shown here on multiple lines for clarity, but the entire command must be entered on one line.
Include quotation marks around file paths that include spaces. For Linux:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
./imcl rollback com.hcl.websphere.PORTAL.EXPRESS.v85
-installationDirectory &lt;portal_server_root&gt;
</code></pre>
Windows:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
imcl.exe rollback com.ibm.websphere.PORTAL.EXPRESS.v85 
-installationDirectory &lt;portal_server_root&gt;
</code></pre></li>
<li class="- topic/li li">After roll back completes, proceed with the "Post Rollback Steps on additional nodes."</li>
</ol>
</div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Use silent mode to roll back on additional nodes (available on Windows, Linux, Unix, and IBM i operating systems)</span>
<ol class="- topic/ol ol">
<li class="- topic/li li">Stop any active application servers and node agents by using the <code class="+ topic/ph pr-d/codeph ph codeph">stopServer</code> and <code class="+ topic/ph pr-d/codeph ph codeph">stopNode</code> commands. To see 
which application servers are 
active, use the <code class="+ topic/ph pr-d/codeph ph codeph">serverStatus</code> command from the &lt;wp_profile&gt;/bin directory and again from the &lt;cw_profile&gt;/bin directory. If the 
Deployment Manager is installed on the same server as one of the cluster nodes, you must also stop the Deployment Manager using the 
<code class="+ topic/ph pr-d/codeph ph codeph">stopManager</code> command from the &lt;dmgr&gt;/bin directory.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: ./serverStatus.sh -all
Windows: serverStatus.bat -all
IBM i: serverStatus -all</code></pre></li>
<li class="- topic/li li"> For IBM i only, Run the following command from qshell:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
chown QEJBSVR /QIBM/UserData/WebSphere/AppServer/V85/ND/profiles/cw_profile/ConfigEngine/properties/wkplc.properties</code></pre>
</li>
<li class="- topic/li li">Open a command window and switch to the eclipse/tools sub-directory of Installation Manager. By
default, this is:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: /opt/IBM/InstallationManager/eclipse/tools
Windows: C:\Program Files\IBM\Installation Manager\eclipse\tools
IBM i: /QIBM/ProdData/InstallationManager/eclipse/tools</code></pre>
</li>
<li class="- topic/li li">
Update the sample response file that is packaged with your cumulative fix level according to the comments in the file.</li>
<li class="- topic/li li">
Run the following command to roll back in silent mode:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
imcl -input &lt;Full_path_to_your_response_file&gt; -log &lt;Full_Path_to_a_log_file&gt; -showProgress</code></pre>
</li>
<li class="- topic/li li">After roll back completes, proceed with the "Post Rollback Steps on additional nodes."</li>
</ol>
</div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Use Console Mode to roll back on additional nodes (available on Windows, Linux, Unix and IBM i operating systems)</span>
<ol class="- topic/ol ol">
<li class="- topic/li li">Stop any active application servers and node agents by using the <code class="+ topic/ph pr-d/codeph ph codeph">stopServer</code> and <code class="+ topic/ph pr-d/codeph ph codeph">stopNode</code> commands. To see 
which application servers are 
active, use the <code class="+ topic/ph pr-d/codeph ph codeph">serverStatus</code> command from the &lt;wp_profile&gt;/bin directory and again from the &lt;cw_profile&gt;/bin directory. If the 
Deployment Manager is installed on the same server as one of the cluster nodes, you must also stop the Deployment Manager using the 
<code class="+ topic/ph pr-d/codeph ph codeph">stopManager</code> command from the &lt;dmgr&gt;/bin directory.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: ./serverStatus.sh -all
Windows: serverStatus.bat -all
IBM i: serverStatus -all</code></pre></li>
<li class="- topic/li li"> For IBM i only, Run the following command from qshell:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
chown QEJBSVR /QIBM/UserData/WebSphere/AppServer/V85/ND/profiles/cw_profile/ConfigEngine/properties/wkplc.properties</code></pre>
</li>
<li class="- topic/li li"> Open a command window and switch to the eclipse/tools sub-directory of Installation Manager. By
default, this is:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: /opt/IBM/InstallationManager/eclipse/tools
Windows: C:\Program Files\IBM\Installation Manager\eclipse\tools
IBM i: /QIBM/ProdData/InstallationManager/eclipse/tools</code></pre>
</li>
<li class="- topic/li li">
Run the command to start the IBM Installation Manager in console mode. For Unix/Linux:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
./imcl  -c
</code></pre>
Windows:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
imcl.exe -c
</code></pre>
IBM i:
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
./imcl  -c</code></pre>
</li>
<li class="- topic/li li">Select Roll back and follow the prompts to roll back HCL Portal.</li>
<li class="- topic/li li">After installation completes, proceed with the "Post Rollback Steps."</li>
</ol>
</div>
</section>
<section class="- topic/section section" id="new_cf__post_rollback_additional_nodes_cf_cluster_85" data-ofbid="new_cf__post_rollback_additional_nodes_cf_cluster_85"><h2 class="- topic/title title sectiontitle">Post Rollback Steps on additional nodes</h2>

<p class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Linux, Unix, Windows or IBM i</span>
Use the following commands to roll back all profiles.
These steps must be repeated for each profile, if multiple profiles exist.
All cluster members and all profiles that share the same Portal installation directory (multiple profile option) must be updated to the 
same level to complete the CF installation.</p>
<p class="- topic/p p">
Note: The following configuration steps should be run as the user who normally administers the Portal Server, which may or may not be the 
same user who runs the installation program.</p>
<p class="- topic/p p">
Note: If a remote search server is used within this environment, it should be started before running the following commands.</p>
<div class="- topic/p p"><ol class="- topic/ol ol">
<li class="- topic/li li">Ensure the <code class="+ topic/ph pr-d/codeph ph codeph">nodeagent</code> and <code class="+ topic/ph pr-d/codeph ph codeph">HCL Portal and HCL Web Content Manager</code> servers are stopped on the profile you intend to rollback. The Deployment Manager must 
be started.</li>
<li class="- topic/li li">Run the following command from within the path of the profile to configure. Do note that if you are rolling back the CF on an empty 
portal then many of the expected artifacts will not exist and the rollbackCF command will fail. In this case you must define the 
"isEmptyPortal" property on the command line. Example: <code class="+ topic/ph pr-d/codeph ph codeph">rollbackCF.sh -DisEmptyPortal=true</code>
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: &lt;profile_root&gt;/PortalServer/bin/rollbackCF.sh -DPortalAdminPwd=&lt;password&gt; -DWasPassword=&lt;password&gt;
Windows: &lt;profile_root&gt;\PortalServer\bin\rollbackCF.bat -DPortalAdminPwd=&lt;password&gt; -DWasPassword=&lt;password&gt;
IBM i: &lt;profile_root&gt;/PortalServer/bin/rollbackCF.sh -DPortalAdminPwd=&lt;password&gt; -DWasPassword=&lt;password&gt;
</code></pre>
Important: If the rollbackCF command fails for any reason, check the error logs and correct error conditions, then stop 
<code class="+ topic/ph pr-d/codeph ph codeph">HCL Portal and HCL Web Content Manager</code> before re-running.</li>
<li class="- topic/li li">If you previously customized any configuration files in the <code class="+ topic/ph pr-d/codeph ph codeph">wp_profile_root/PortalServer/config</code> directory, 
check to see if rolling back the cumulative fix affected those files by restoring a version of the files that 
was saved when the cumulative fix was originally installed. If it did affect the files, you must perform the 
same customization on the restored version of each file.</li>
<li class="- topic/li li">
Verify that your system is operational by entering the server's URL in a browser and logging in to browse the content.</li>
</ol>
</div>
<div class="- topic/p p"><span class="+ topic/keyword ui-d/wintitle keyword wintitle">Restoring IP traffic after roll back for additional nodes (Required only if following
					the 24x7 single cluster roll back.)</span>
				<ul class="- topic/ul ul">
					<li class="- topic/li li">If you are using IP sprayers for load balancing, reconfigure the IP sprayers
						to restore traffic to the downgraded node.</li>
					<li class="- topic/li li">If you are using the Web server plug-in for load balancing, perform the
						following steps to restore traffic to the downgraded node.</li>
				</ul> If you are using the Web server plug-in for load balancing, perform the
				following steps to restore traffic to the downgraded node: <ol class="- topic/ol ol">
					<li class="- topic/li li">In the Deployment Manager administrative console, click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Servers
							&gt; Clusters &gt; WebSphere application server clusters &gt;
							cluster_name &gt; Cluster members</span> to obtain a view of the
						collection of cluster members.</li>
					<li class="- topic/li li"> Locate the cluster member you downgraded and change the value in the
						Configured weight column back to the original value.</li>
					<li class="- topic/li li"> Click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Update</span> to apply the change. If you are not
						using automatic generation and propagation for the Web server plug-in,
						manually generate and/or propagate the <code class="+ topic/ph pr-d/codeph ph codeph">plugin-cfg.xml</code> file
						to the Web servers.</li>
				</ol></div>
</section>
<section class="- topic/section section" id="new_cf__finalizing_rollback_cf_cluster_85" data-ofbid="new_cf__finalizing_rollback_cf_cluster_85"><h2 class="- topic/title title sectiontitle">Finalizing the roll back</h2>

<div class="- topic/p p">1. Re-enable automatic synchronization on all nodes in the cluster if you disabled it earlier.
<ul class="- topic/ul ul">
<li class="- topic/li li">In the administrative console for the deployment manager, select <span class="+ topic/ph ui-d/uicontrol ph uicontrol">System administration &gt; Node agents</span> in the navigation tree.</li>
<li class="- topic/li li">Click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">nodeagent</span> for the required node.</li>
<li class="- topic/li li">Click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">File Synchronization Service</span>.</li>
<li class="- topic/li li">Check the <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Automatic Synchronization</span> check box to enable the automatic synchronization feature and check the 
<span class="+ topic/ph ui-d/uicontrol ph uicontrol">Enable service at server startup</span> check box to enable the synchronization service at server startup on the 
File Synchronization Service page and then click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">OK</span>.</li>
<li class="- topic/li li">Repeat these steps for all remaining nodes.</li>
<li class="- topic/li li">Click Save to save the configuration changes to the master repository.</li>
<li class="- topic/li li">Select <span class="+ topic/ph ui-d/uicontrol ph uicontrol">System administration &gt; Nodes</span> in the navigation tree.</li>
<li class="- topic/li li">Select all nodes that are not synchronized, and click on <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Synchronize</span>.</li>
<li class="- topic/li li">Select <span class="+ topic/ph ui-d/uicontrol ph uicontrol">System administration &gt; Node agents</span> in the navigation tree.</li>
<li class="- topic/li li">Select all node agents where automatic synchronization has been re-enabled and click <span class="+ topic/ph ui-d/uicontrol ph uicontrol">Restart</span>.</li>
</ul>
</div>
<p class="- topic/p p">2. If necessary, redeploy any customizations, including JSPs, to the WCM portlets (if using HCL Web Content Manager), any other 
portlets, or any other Portal enterprise applications, if these were customized prior to rolling back the cumulative fix.</p>
<p class="- topic/p p">3. If you have set up a remote search server or document conversion server for use with HCL Portal Version 8.5, then whenever you 
roll back a cumulative fix to the portal server, you should also roll back the corresponding cumulative fix to the remote server. Refer to the 
<cite class="- topic/cite cite">HCL Portal Version 8.5 combined cumulative fix instructions: remote search</cite> for the details of rolling back a cumulative fix to 
the remote server.</p>
<div class="- topic/p p">4. If using HCL Web Content Manager and have installed any official extensions (such as the WCM Multilingual Solution (MLS) or 
WCM Social Media Publisher (SMP)), then run the following task to update them.
This task needs to be run for primary and additional nodes.
<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>
Unix/Linux: &lt;profile_root&gt;/ConfigEngine/ConfigEngine.sh action-update-wcm-extensions -DWasPassword=&lt;password&gt; -DPortalAdminPwd=&lt;password&gt;
Windows: &lt;profile_root&gt;\ConfigEngine\ConfigEngine.bat action-update-wcm-extensions -DWasPassword=&lt;password&gt; -DPortalAdminPwd=&lt;password&gt;
IBM i: &lt;profile_root&gt;/ConfigEngine/ConfigEngine.sh action-update-wcm-extensions -DWasPassword=&lt;password&gt; -DPortalAdminPwd=&lt;password&gt;
</code></pre>
The task can be run even if you are not sure if you had the extensions enabled. If you want to check if they were enabled the following 
tasks can be used:
<ul class="- topic/ul ul">
<li class="- topic/li li">for MLS use <code class="+ topic/ph pr-d/codeph ph codeph">ConfigEngine.sh|bat action-is-wcm-mls-enabled</code></li>
<li class="- topic/li li">for SMP use <code class="+ topic/ph pr-d/codeph ph codeph">ConfigEngine.sh|bat action-is-wcm-smp-enabled</code></li>
</ul>
</div>
<div class="- topic/p p">5. For rollback to CF03 or earlier level only: If the Brightcove integration was enabled perform the following steps:
<ul class="- topic/ul ul">
<li class="- topic/li li">Uninstall the old Brightcove plugins.</li>
<li class="- topic/li li">Install the new Brightcove plugins by following the install steps in the <cite class="- topic/cite cite">Configuring</cite> topic section to use Brightcove.</li>
</ul></div>
<div class="- topic/p p">6. For rollback to CF03 or earlier level only: If using Rich Media Edition, perform the following steps:
<ul class="- topic/ul ul">
<li class="- topic/li li">Uninstall the Rich Media Edition plugins</li>
<li class="- topic/li li">Restart Portal Server.</li>
<li class="- topic/li li">Reinstall the Rich Media Edition plugins.</li>
</ul></div>
<p class="- topic/p p">7. If you brought down the entire cluster to perform the rollback (not maintaining 24 x 7 on a single cluster), and the automatic 
plug-in generation and propagation are disabled on your web server Plug-in properties, you will need to manually generate and/or 
propagate the <code class="+ topic/ph pr-d/codeph ph codeph">plugin-cfg.xml</code> file to the Web servers.</p>
<p class="- topic/p p">8. Clear the browser cache.</p>
</section>
</div>
	</article></main></div>
                        
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div class=" wh_topic_toc "><div class="wh_topic_label">On this page</div><ul><li class="section-item"><div class="section-title"><a href="#new_cf__cluster_upgrade_planning" data-tocid="new_cf__cluster_upgrade_planning">Cluster upgrade planning</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__before_you_begin_cluster_cf_fix" data-tocid="new_cf__before_you_begin_cluster_cf_fix">Before you begin</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__best_practices_cf_cluster_fix" data-tocid="new_cf__best_practices_cf_cluster_fix">Best Practices</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__syndicator_subscriber_information" data-tocid="new_cf__syndicator_subscriber_information">Syndicator/Subscriber Information</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__search_crawler_info" data-tocid="new_cf__search_crawler_info">Search Crawler Information</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__backing_up_installation_manager_data" data-tocid="new_cf__backing_up_installation_manager_data">Backing up the Installation Manager data</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__known_issues_cluster_cf" data-tocid="new_cf__known_issues_cluster_cf">Known Issues</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__review_supported_hardware_software" data-tocid="new_cf__review_supported_hardware_software">Review supported hardware/software requirements</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__check_fixes_installed_on_system" data-tocid="new_cf__check_fixes_installed_on_system">Check fixes installed on your system</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__special_instructions_DX_patterns" data-tocid="new_cf__special_instructions_DX_patterns">Special instructions pertaining to HCL Digital Experience Patterns</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__ensure_wkplc_properties" data-tocid="new_cf__ensure_wkplc_properties">Ensure <code class="+ topic/ph pr-d/codeph ph codeph">wkplc</code> properties files are correct</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__unix_linux_windows_ibmi_cluster_cf" data-tocid="new_cf__unix_linux_windows_ibmi_cluster_cf">Unix, Linux, Windows, and IBM i:</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__multiple_profile_considerations" data-tocid="new_cf__multiple_profile_considerations">Multiple profile considerations</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__non_root_considerations" data-tocid="new_cf__non_root_considerations">Non-root considerations</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__antivirus_file_indexing" data-tocid="new_cf__antivirus_file_indexing">Anti-virus and file indexing software considerations (Windows only)</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__special_considerations_was_85514" data-tocid="new_cf__special_considerations_was_85514">Special note for customers using WAS 8.5.5.14</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__download_cumulative_fix" data-tocid="new_cf__download_cumulative_fix">Download the cumulative fix</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__disabling_automatic_synchronization" data-tocid="new_cf__disabling_automatic_synchronization">Disabling automatic synchronization and stopping the node agents</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__upgrading_primary_node" data-tocid="new_cf__upgrading_primary_node">Upgrading the primary node</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__additional_config_steps_cf_cluster" data-tocid="new_cf__additional_config_steps_cf_cluster">Additional configuration steps</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__upgraded_additional_nodes_cf_cluster" data-tocid="new_cf__upgraded_additional_nodes_cf_cluster">Upgrading additional nodes</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__additional_config_steps_additional_nodes" data-tocid="new_cf__additional_config_steps_additional_nodes">Additional configuration steps on additional nodes</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__finalizing_upgrade_cf_cluster_85" data-tocid="new_cf__finalizing_upgrade_cf_cluster_85">Finalizing the upgrade</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__before_rollback_start" data-tocid="new_cf__before_rollback_start">Before you begin roll back</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__disabling_auto_synchronization_stop_node_agents_rollback" data-tocid="new_cf__disabling_auto_synchronization_stop_node_agents_rollback">Disabling automatic synchronization and stopping the node agents for roll back</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__rollback_primary_node_85_steps" data-tocid="new_cf__rollback_primary_node_85_steps">Steps to roll back the Primary node</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__post-rollback_steps_cf_cluster_85" data-tocid="new_cf__post-rollback_steps_cf_cluster_85">Post Rollback Steps</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__rollback_additional_nodes_85" data-tocid="new_cf__rollback_additional_nodes_85">Steps to roll back additional nodes</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__post_rollback_additional_nodes_cf_cluster_85" data-tocid="new_cf__post_rollback_additional_nodes_cf_cluster_85">Post Rollback Steps on additional nodes</a></div></li><li class="section-item"><div class="section-title"><a href="#new_cf__finalizing_rollback_cf_cluster_85" data-tocid="new_cf__finalizing_rollback_cf_cluster_85">Finalizing the roll back</a></div></li></ul></div>
                        </nav>
                        
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer" whc:version="23.1">
  <div class=" footer-container mx-auto ">
    
            Generated by <a class="oxyFooter" href="http://www.oxygenxml.com/xml_webhelp.html" target="_blank">
            &lt;oXygen/&gt; XML WebHelp
            </a>
        
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <!-- The modal container for images -->
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <!-- Modal Content (The Image) -->
            <img class="modal-content" id="modal-img" alt=""/>
            <!-- Modal Caption (Image Text) -->
            <div id="caption"></div>
        </div>
        
        
        
    </body>
</html>